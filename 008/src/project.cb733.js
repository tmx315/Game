window.__require=function e(t,n,o){function i(r,s){if(!n[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+r+"'")}}var h=n[r]={exports:{}};t[r][0].call(h.exports,function(e){return i(t[r][1][e]||e)},h,h.exports,e,t,n,o)}return n[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<o.length;r++)i(o[r]);return i}({AdRewardTipPanelCtrl:[function(e,t,n){"use strict";cc._RF.push(t,"0c7ae0CFNpHg4OJfmLTBn6r","AdRewardTipPanelCtrl"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameManager"),i=e("./LanguageManager"),a=e("./AdsManager"),r=e("./Platform/BenzCommand"),s=e("./GameToolCtrl"),c=cc._decorator,l=c.ccclass,h=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.contentLabel=null,t.bombBtnLabel=null,t.hammerBtnLabel=null,t.refreshBtnLabel=null,t.animation=null,t._isHide=!1,t._type=s.ToolType.None,t._hideDel=null,t}var n;return __extends(t,e),n=t,t.prototype.onLoad=function(){var e=i.default.instance.getString("getAdRewardTip");this.bombBtnLabel.string=e,this.hammerBtnLabel.string=e,this.refreshBtnLabel.string=e,this.contentLabel.string=i.default.instance.getString("getAdRewardTitle"),this.animation.on(cc.Animation.EventType.FINISHED,function(){this._isHide&&(this.node.active=!1)}.bind(this))},t.show=function(e){void 0===e&&(e=null),this._instance?this._instance._show(e):cc.loader.loadRes("prefabs/AdRewardTipPanel",cc.Prefab,function(t,i){var a=cc.instantiate(i);a.parent=o.default.instance.node,a.zIndex=10;var r=a.getComponent(n);n._instance=r,r._show(e)})},t.prototype._show=function(e){this._hideDel=e,this.node.active=!0,this._isHide=!1,this.animation.play("show")},t.prototype.onBomb=function(){this._type=s.ToolType.Bomb,this._watchAd()},t.prototype.onHammer=function(){this._type=s.ToolType.Hammer,this._watchAd()},t.prototype.onRefresh=function(){this._type=s.ToolType.Refresh,this._watchAd()},t.prototype._watchAd=function(){var e=this;a.AdsManager.getInstance().showRewardAd(r.BenzCommand.CMD_SHOW_REWARD_VIDEO_AD,{success:function(){o.default.instance.addTool(e._type),e._hide()},fail:function(){e._hide()}})},t.prototype.onCancel=function(){this._hide()},t.prototype._hide=function(){this._isHide=!0,this.animation.play("hide"),this._hideDel&&(this._hideDel(),this._hideDel=null)},t._instance=null,__decorate([h(cc.Label)],t.prototype,"contentLabel",void 0),__decorate([h(cc.Label)],t.prototype,"bombBtnLabel",void 0),__decorate([h(cc.Label)],t.prototype,"hammerBtnLabel",void 0),__decorate([h(cc.Label)],t.prototype,"refreshBtnLabel",void 0),__decorate([h(cc.Animation)],t.prototype,"animation",void 0),t=n=__decorate([l],t)}(cc.Component);n.default=u,cc._RF.pop()},{"./AdsManager":"AdsManager","./GameManager":"GameManager","./GameToolCtrl":"GameToolCtrl","./LanguageManager":"LanguageManager","./Platform/BenzCommand":"BenzCommand"}],AdsManager:[function(e,t,n){"use strict";cc._RF.push(t,"539ffp28ZNMPJYUn59dE/U8","AdsManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Platform/BenzCommand"),i=e("./Platform/BenzPlatformManager"),a=e("./Benz/BenzLog"),r=function(){function e(){this._playCount=0}return e.getInstance=function(){return this._instance},e.prototype.init=function(){a.BenzLog.log("[AdsManager] Init")},e.prototype.showRewardAd=function(e,t){i.BenzPlatformManager.sendData(e,t)},e.prototype.showInterstitialAd=function(){this._playCount++,this._playCount<e.ADS_LEVEL_COUNT||(this._playCount=0,i.BenzPlatformManager.sendData(o.BenzCommand.CMD_SHOW_NONE_REWARD_VIDEO_AD,null))},e.ADS_LEVEL_COUNT=3,e._instance=new e,e}();n.AdsManager=r,cc._RF.pop()},{"./Benz/BenzLog":"BenzLog","./Platform/BenzCommand":"BenzCommand","./Platform/BenzPlatformManager":"BenzPlatformManager"}],AudioManager:[function(e,t,n){"use strict";cc._RF.push(t,"eac12Bz4udL6oPTo9cYgQyC","AudioManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Collection/Dictionary"),i=cc._decorator,a=i.ccclass;i.property;n.SoundName={BGM:"bgm",ClickBtn:"click_btn",GainScore:"gain_score",GameOver:"game_over",GenerateHexsRorate:"generate_hexs_rorate",HammerHit:"hammer_hit",HexPut:"hex_put",Synthesis10:"synthesis_10",SynthesisHex:"synthesis_hex",Boom:"boom"};var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._audioClipDic=new o.Dictionary,t._isPlayBgm=!1,t._mute=!1,t}var i;return __extends(t,e),i=t,Object.defineProperty(t.prototype,"isMute",{get:function(){return this._mute},enumerable:!0,configurable:!0}),Object.defineProperty(t,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){i._instance=this;var e=cc.sys.localStorage.getItem("mute");this._mute=null!=e&&"true"==e},t.prototype.start=function(){this.play(n.SoundName.BGM,!0)},t.prototype.switchSound=function(){this._mute=!this._mute,cc.sys.localStorage.setItem("mute",this._mute),this._mute?cc.audioEngine.pauseAll():cc.audioEngine.resumeAll(),this._mute||this._isPlayBgm||this.play(n.SoundName.BGM,!0)},t.prototype.play=function(e,t){if(void 0===t&&(t=!1),!this._mute)if(e==n.SoundName.BGM&&(this._isPlayBgm=!0),this._audioClipDic.containsKey(e))cc.audioEngine.play(this._audioClipDic.get(e),t,1);else{var o=this;cc.loader.loadRes("audio/"+e,cc.AudioClip,function(n,i){null==n&&(o._audioClipDic.set(e,i),cc.audioEngine.play(i,t,1))})}},t._instance=null,t=i=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{"./Collection/Dictionary":"Dictionary"}],Benz4399Platform:[function(e,t,n){"use strict";cc._RF.push(t,"570e7ImQ2ZA/bz2Lg5q73hF","Benz4399Platform"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./BenzCommand"),i=e("../Benz/BenzLog"),a=e("../DataManager"),r=function(){function e(){this._rewardData=null,this._totalTipCount=10,this._curUseTipCount=null,this._curDateTimeStr="",this._remainTime=0,this._isLoad=!1}return e.prototype.init=function(){i.BenzLog.log("init");var e=window.document.getElementsByTagName("HEAD").item(0),t=window.document.createElement("script");t.type="text/javascript",t.src="http://h.api.4399.com/h5mini-2.0/h5api-interface.php",e.appendChild(t),this._isLoad=!1},e.prototype.initParam=function(){if(null==this._curUseTipCount){console.log("initParam");var e=a.DataManager.getInstance().getStringForKey("left_tips_count_4399","").split("-"),t=new Date;this._curDateTimeStr=t.getUTCFullYear()+""+t.getMonth()+t.getDate(),e.length<=1?(this._curUseTipCount=0,this.setTipCount()):(this._curUseTipCount=parseInt(e[1]),this._curDateTimeStr!=e[0]&&this.setTipCount())}},e.prototype.setTipCount=function(){this._remainTime--,this._remainTime<0&&(this._remainTime=0)},e.prototype.sendData=function(e,t){try{switch(e){case o.BenzCommand.CMD_SHOW_REWARD_VIDEO_AD:this.canShowAd()&&(this._rewardData=t,this.sendDataToNative())}}catch(e){}},e.prototype.sendDataToNative=function(){var e=this;this.canPlayAd()?window.h5api.playAd(function(t){1e4===t.code?console.log("\u5f00\u59cb\u64ad\u653e"):10001===t.code?(console.log("\u64ad\u653e\u7ed3\u675f"),e._rewardData&&(e.setTipCount(),e._rewardData.success())):(console.log("\u5e7f\u544a\u5f02\u5e38"),e._rewardData&&e._rewardData.fail())}):(console.log("\u5f53\u524d\u65e0\u5e7f\u544a\u64ad\u653e"),this._rewardData&&this._rewardData.fail())},e.prototype.receiveData=function(e,t){},e.prototype.loadStorageData=function(e,t,n){try{for(var o={},i=0;i<e.length;i++){var a=e[i];o[a]=cc.sys.localStorage.getItem(a)}t(o)}catch(e){n(e)}},e.prototype.flushStorageData=function(e,t){try{Object.keys(e).forEach(function(t){cc.sys.localStorage.setItem(t,e[t])}),t(null)}catch(e){t(e)}},e.prototype.submitScore=function(e,t){},e.prototype.invite=function(e){e(null)},e.prototype.challenge=function(e){e(new Error("no need challenge now"))},e.prototype.getLeaderboard=function(e,t){},e.prototype.canPlayAd=function(){i.BenzLog.log("_remainTime:"+this._remainTime);var e=this;try{return window.h5api.canPlayAd(function(t){i.BenzLog.log("\u662f\u5426\u53ef\u64ad\u653e\u5e7f\u544a\uff1a"+t.canPlayAd+"  \u5269\u4f59\u6b21\u6570:"+t.remain),e._remainTime=t.remain})}catch(e){}},e.prototype.canShowAd=function(){return this._isLoad||(this._isLoad=!0,this.canPlayAd()),this._remainTime>0},e}();n.Benz4399Platform=r,cc._RF.pop()},{"../Benz/BenzLog":"BenzLog","../DataManager":"DataManager","./BenzCommand":"BenzCommand"}],BenzAdsEntity:[function(e,t,n){"use strict";cc._RF.push(t,"fc302sHn+VI1rSlvM3gkYIv","BenzAdsEntity"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],BenzCommand:[function(e,t,n){"use strict";cc._RF.push(t,"0946ajQwFFO8IAcyGb+nGQg","BenzCommand"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.CMD_SDK_INIT=1e4,e.CMD_SHOW_REWARD_VIDEO_AD=10001,e.CMD_SHOW_NONE_REWARD_VIDEO_AD=10002,e.CMD_SHOW_BANNER_AD=10003,e.CMD_SHOW_FULL_SCREEN_AD=10004,e.CMD_HIDE_BANNER_AD=10102,e.RESPONSE_CMD_SHOW_REWARD_VIDEO_AD=20001,e.CMD_SHARE=30001,e.CMD_GET_RANK=30002,e.CMD_FINISH_CHALLENGE=30003,e.FIELD_RESULT="result",e.RESULT_FAIL=0,e.RESULT_OK=1,e}();n.BenzCommand=o,cc._RF.pop()},{}],BenzFacebookPlatform:[function(e,t,n){"use strict";cc._RF.push(t,"1770cCgy/1JWrfyfKomeK42","BenzFacebookPlatform"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Benz/BenzLog"),i=e("./BenzCommand"),a=e("./BenzSocialManager"),r=e("../Collection/Dictionary"),s=function(){function e(){this._preloadedDic=new r.Dictionary}return e.prototype.init=function(){try{var e=FBInstant.getSupportedAPIs();e&&e.includes("getInterstitialAdAsync")&&(this.loadRewardAd(),this.loadInterstitialAd())}catch(e){}},e.prototype.sendData=function(e,t){switch(e){case i.BenzCommand.CMD_GET_RANK:this.updateRank();break;case i.BenzCommand.CMD_SHOW_REWARD_VIDEO_AD:this.showRewardAd(t);break;case i.BenzCommand.CMD_SHOW_NONE_REWARD_VIDEO_AD:this.showInterstitialAd();break;case i.BenzCommand.CMD_SHOW_BANNER_AD:break;case i.BenzCommand.CMD_FINISH_CHALLENGE:this.quitGame()}},e.prototype.receiveData=function(e,t){},e.prototype.loadStorageData=function(e,t,n){try{FBInstant.player.getDataAsync(e).then(function(n){for(var o={},i=0;i<e.length;i++){var a=e[i];o[a]=n[a]}t(o)}).catch(function(e){n(e)})}catch(e){n(e)}},e.prototype.flushStorageData=function(e,t){try{FBInstant.player.setDataAsync(e).then(function(){o.BenzLog.log("[BenzFacebookPlatform] data is set"),t(null)}).catch(function(e){t(e)})}catch(e){t(e)}},e.prototype.submitScore=function(t,n){try{var i=!1,r=FBInstant.context.getID();r&&(i=!0,FBInstant.getLeaderboardAsync(e.TOP_THREAD_LEADERBOARD+r).then(function(e){return e.setScoreAsync(t)}).then(function(e){a.BenzSocialManager.getInstance().setCurrentRank(e.getRank()),n&&n(null)}).catch(function(e){o.BenzLog.logError(e)}),FBInstant.updateAsync({action:"LEADERBOARD",name:e.TOP_THREAD_LEADERBOARD+r,text:o.BenzLog.format("I've passed level {0}! Come challenge!",t)}).catch(function(e){o.BenzLog.logError(e)})),FBInstant.getLeaderboardAsync(e.TOP_LEADERBOARD).then(function(e){return e.setScoreAsync(t)}).then(function(e){i||(a.BenzSocialManager.getInstance().setCurrentRank(e.getRank()),n&&n(null))}).catch(function(e){return o.BenzLog.logError(e)})}catch(e){}},e.prototype.quitGame=function(){try{FBInstant.context.getID()&&FBInstant.quit()}catch(e){}},e.prototype.invite=function(e){try{FBInstant.context.getID()?(o.BenzLog.log("[BenzSocialManager] has match id"),e&&e(null)):FBInstant.checkCanPlayerMatchAsync().then(function(t){t?(o.BenzLog.log("[BenzSocialManager] can match friends"),FBInstant.matchPlayerAsync("challenge").then(function(){e&&e(null)}).catch(function(t){e&&e(t),o.BenzLog.logError(t)})):(o.BenzLog.log("[BenzSocialManager] can not match friends"),e&&e(null))}).catch(function(t){e&&e(t),o.BenzLog.logError(t)})}catch(t){e&&e(t)}},e.prototype.challenge=function(e){try{if(!FBInstant.context.getID())return void e(new Error("no challenge"));e(null)}catch(t){e&&e(t)}},e.prototype.getLeaderboard=function(t,n){FBInstant.getLeaderboardAsync(e.TOP_LEADERBOARD).then(function(e){return e.getEntriesAsync(a.BenzSocialManager.PAGE_COUNT,0)}).then(function(e){for(var n=[],o=0;o<e.length;o++)try{n.push({name:e[o].getPlayer().getName(),avatarUrl:e[o].getPlayer().getPhoto(),score:e[o].getScore(),rank:e[o].getRank(),x:0,y:0})}catch(e){}t(n)}).catch(function(e){n(e),o.BenzLog.logError(e)})},e.prototype.updateRank=function(){try{var t="",n=FBInstant.context.getID();t=n?e.TOP_THREAD_LEADERBOARD+n:e.TOP_LEADERBOARD,FBInstant.getLeaderboardAsync(t).then(function(e){return e.getPlayerEntryAsync()}).then(function(e){a.BenzSocialManager.getInstance().setLastRank(e.getRank())}).catch(function(e){return o.BenzLog.logError(e)})}catch(e){}},e.prototype.showRewardAd=function(t){o.BenzLog.IsDebug?t.success():this.playAd(e.REWARD_PLACEMENT_ID,!0,t)},e.prototype.loadRewardAd=function(){this.loadAd(e.REWARD_PLACEMENT_ID,!0)},e.prototype.showInterstitialAd=function(){this.playAd(e.INTERSTITIAL_PLACEMENT_ID,!1)},e.prototype.loadInterstitialAd=function(){this.loadAd(e.INTERSTITIAL_PLACEMENT_ID,!1)},e.prototype.playAd=function(e,t,n){try{var i=this,a=i._preloadedDic.get(e);if(a)return void a.showAsync().then(function(){n&&n.success(),i.loadAd(e,t)}).catch(function(a){n&&n.fail(),i.loadAd(e,t),o.BenzLog.logError(a)});(t?FBInstant.getRewardedVideoAsync(e):FBInstant.getInterstitialAdAsync(e)).then(function(e){return(a=e).loadAsync()}).then(function(){return a.showAsync()}).then(function(){n&&n.success()}).catch(function(e){n&&n.fail(),o.BenzLog.logError(e)})}catch(o){n&&n.fail(),this.loadAd(e,t)}},e.prototype.loadAd=function(e,t){try{var n=this;n._preloadedDic.set(e,null);(t?FBInstant.getRewardedVideoAsync(e):FBInstant.getInterstitialAdAsync(e)).then(function(t){return n._preloadedDic.set(e,t),t.loadAsync()}).then(function(){}).catch(function(t){n._preloadedDic.set(e,null),o.BenzLog.logError(t)})}catch(t){this._preloadedDic.set(e,null)}},e.prototype.canShowAd=function(){return!0},e.TOP_LEADERBOARD="Global leaderboard",e.TOP_THREAD_LEADERBOARD="Leaderboard.",e.INTERSTITIAL_PLACEMENT_ID="2228029680801371_2228606617410344",e.REWARD_PLACEMENT_ID="2228029680801371_2228601364077536",e}();n.BenzFacebookPlatform=s,cc._RF.pop()},{"../Benz/BenzLog":"BenzLog","../Collection/Dictionary":"Dictionary","./BenzCommand":"BenzCommand","./BenzSocialManager":"BenzSocialManager"}],BenzLeaderboardEntity:[function(e,t,n){"use strict";cc._RF.push(t,"e090a2vFxZJuJr0tz6qW6kc","BenzLeaderboardEntity"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],BenzLog:[function(e,t,n){"use strict";cc._RF.push(t,"fd82b9sEYBIJrgM7r7titf1","BenzLog"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.log=function(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];e.IsDebug&&(n?console.log(t.replace(/\{(\d+)\}/g,function(e,t){return n[parseInt(t)]})):console.log(t))},e.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=t;return e.replace(/\{(\d+)\}/g,function(e,t){return o[parseInt(t)]})},e.dataLeftCompleting=function(e,t,n){return(Array(e+1).join(t)+n).slice(-e)},e.safeDestroy=function(e){e&&e.isValid&&e.destroy()},e.logError=function(t){e.IsDebug&&console.error(t)},e.IsDebug=!1,e}();n.BenzLog=o,cc._RF.pop()},{}],BenzMobileNativePlatform:[function(e,t,n){"use strict";cc._RF.push(t,"e6080bG009CtJOaKftkh6su","BenzMobileNativePlatform"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./BenzCommand"),i=e("../Benz/BenzLog"),a=function(){function e(){this._rewardData=null}return e.prototype.init=function(){try{this.sendDataToNative(o.BenzCommand.CMD_SDK_INIT,{gameid:"",channel:10001,ad:{appid:e.APP_ID,videoAdKey:e.VIDEO_AD_KEY,awardAdKey:e.AWARD_AD_KEY,picAdKey:e.PIC_AD_KEY,bannerAdKey:e.BANNER_AD_KEY}})}catch(e){i.BenzLog.log("error:"+e)}},e.prototype.sendData=function(e,t){try{switch(e){case o.BenzCommand.CMD_SHOW_REWARD_VIDEO_AD:this._rewardData=t}this.sendDataToNative(e,null)}catch(e){}},e.prototype.receiveData=function(e,t){try{i.BenzLog.log("[Platform] Type:{0} Content:{1}",e,t);var n=decodeURIComponent(t);switch(e){case o.BenzCommand.RESPONSE_CMD_SHOW_REWARD_VIDEO_AD:try{JSON.parse(n)[o.BenzCommand.FIELD_RESULT]>=o.BenzCommand.RESULT_OK?this._rewardData&&this._rewardData.success():this._rewardData&&this._rewardData.fail()}catch(e){this._rewardData&&this._rewardData.fail()}finally{this._rewardData=null}}}catch(e){}},e.prototype.sendDataToNative=function(e,t){t?jsb.reflection.callStaticMethod("org/benz/tgsdk/BenzSDKWrapper","receiveJSData","(ILjava/lang/String;)V",e,JSON.stringify(t)):jsb.reflection.callStaticMethod("org/benz/tgsdk/BenzSDKWrapper","receiveJSData","(ILjava/lang/String;)V",e,"")},e.prototype.CallJava=function(e,t,n){i.BenzLog.log("CallJava >>  ; "+e+" ; "+t+" ; "+n),n?jsb.reflection.callStaticMethod("org/benz/tgsdk/BenzSDKWrapper",e,"(ILjava/lang/String;)V",t,JSON.stringify(n)):jsb.reflection.callStaticMethod("org/benz/tgsdk/BenzSDKWrapper",e,"(ILjava/lang/String;)V",t,"")},e.prototype.loadStorageData=function(e,t,n){try{for(var o={},i=0;i<e.length;i++){var a=e[i];o[a]=cc.sys.localStorage.getItem(a)}t(o)}catch(e){n(e)}},e.prototype.flushStorageData=function(e,t){try{Object.keys(e).forEach(function(t){cc.sys.localStorage.setItem(t,e[t])}),t(null)}catch(e){t(e)}},e.prototype.submitScore=function(e,t){},e.prototype.invite=function(e){e(null)},e.prototype.challenge=function(e){e(new Error("no need challenge now"))},e.prototype.getLeaderboard=function(e,t){},e.prototype.canShowAd=function(){return!0},e.APP_ID="LqOx676F2s6r256ut5YJ",e.VIDEO_AD_KEY="FjkTZ5R35v4lZWD3aQl",e.AWARD_AD_KEY="W0bd9cUeQXvwPQxBcaj",e.PIC_AD_KEY="vri3J3zfNPkWz1pNeDp",e.BANNER_AD_KEY="",e}();n.BenzMobileNativePlatform=a,cc._RF.pop()},{"../Benz/BenzLog":"BenzLog","./BenzCommand":"BenzCommand"}],BenzPlatformManager:[function(e,t,n){"use strict";cc._RF.push(t,"738d98FA6hM960TcqOSzxIP","BenzPlatformManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./BenzMobileNativePlatform"),i=e("./BenzPlatformType"),a=e("./BenzFacebookPlatform"),r=e("./Benz4399Platform"),s=function(){function e(){}return e.initPlatform=function(){var e;cc.sys.isMobile&&!cc.sys.isBrowser&&cc.sys.platform==cc.sys.ANDROID?e=i.BenzPlatformType.MobileNative:cc.sys.isBrowser&&(e=i.BenzPlatformType.Web),this.init(e)},e.init=function(t){switch(e._type=t,e._type){case i.BenzPlatformType.Facebook:window.benzPlatform=new a.BenzFacebookPlatform;break;case i.BenzPlatformType.Weixin:break;case i.BenzPlatformType.MobileNative:window.benzPlatform=new o.BenzMobileNativePlatform;break;case i.BenzPlatformType.Web:window.benzPlatform=new r.Benz4399Platform}window.benzPlatform||(window.benzPlatform=new a.BenzFacebookPlatform),this.sdk.init()},e.sendData=function(e,t){this.sdk.sendData(e,t)},e.receiveData=function(e,t){this.sdk.receiveData(e,t)},e.loadStorageData=function(e,t,n){this.sdk.loadStorageData(e,t,n)},e.flushStorageData=function(e,t){this.sdk.flushStorageData(e,t)},e.submitScore=function(e,t){this.sdk.submitScore(e,t)},e.invite=function(e){this.sdk.invite(e)},e.challenge=function(e){this.sdk.challenge(e)},e.getLeaderboard=function(e,t){this.sdk.getLeaderboard(e,t)},Object.defineProperty(e,"sdk",{get:function(){return window.benzPlatform},enumerable:!0,configurable:!0}),e.canShowAd=function(){return window.benzPlatform.canShowAd()},e._type=i.BenzPlatformType.Facebook,e}();n.BenzPlatformManager=s,cc._RF.pop()},{"./Benz4399Platform":"Benz4399Platform","./BenzFacebookPlatform":"BenzFacebookPlatform","./BenzMobileNativePlatform":"BenzMobileNativePlatform","./BenzPlatformType":"BenzPlatformType"}],BenzPlatformType:[function(e,t,n){"use strict";cc._RF.push(t,"e1de6pIYeJHlJz3Vi+jYgeq","BenzPlatformType"),Object.defineProperty(n,"__esModule",{value:!0}),function(e){e[e.Facebook=0]="Facebook",e[e.Weixin=1]="Weixin",e[e.MobileNative=2]="MobileNative",e[e.Web=3]="Web"}(n.BenzPlatformType||(n.BenzPlatformType={})),cc._RF.pop()},{}],BenzPlatform:[function(e,t,n){"use strict";cc._RF.push(t,"889ede1h9VEcYUu4ZwIlm/c","BenzPlatform"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],BenzSocialManager:[function(e,t,n){"use strict";cc._RF.push(t,"72770nLnj5CaLag7fg3jqp6","BenzSocialManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Benz/BenzLog"),i=e("./BenzPlatformManager"),a=e("./BenzCommand"),r=function(){function e(){this.lastRank=0,this.currentRank=0}return e.getInstance=function(){return this._instance},e.prototype.init=function(){o.BenzLog.log("[BenzSocialManager] Init"),this.updateRankInfo()},e.prototype.setLastRank=function(e){e>0&&(this.lastRank=e)},e.prototype.setCurrentRank=function(e){e>0&&(this.currentRank=e)},e.prototype.getRankUp=function(){return this.lastRank<=0?this.currentRank:this.lastRank-this.currentRank},e.prototype.getCurrentRank=function(){return this.currentRank},e.prototype.updateRankInfo=function(){i.BenzPlatformManager.sendData(a.BenzCommand.CMD_GET_RANK,null)},e.prototype.invite=function(e){i.BenzPlatformManager.invite(e)},e.prototype.submitScore=function(e,t){e<=0||i.BenzPlatformManager.submitScore(e,t)},e.prototype.share=function(e){i.BenzPlatformManager.sendData(a.BenzCommand.CMD_SHARE,e)},e.PAGE_COUNT=100,e._instance=new e,e}();n.BenzSocialManager=r,cc._RF.pop()},{"../Benz/BenzLog":"BenzLog","./BenzCommand":"BenzCommand","./BenzPlatformManager":"BenzPlatformManager"}],BenzWebPlatform:[function(e,t,n){"use strict";cc._RF.push(t,"0434aIuvYFP+qtB3FbGzMwl","BenzWebPlatform"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Benz/BenzLog"),i=function(){function e(){}return e.prototype.init=function(){},e.prototype.sendData=function(e,t){},e.prototype.receiveData=function(e,t){try{o.BenzLog.log("[Platform] Type:{0} Content:{1}",e,t)}catch(e){}},e.prototype.loadStorageData=function(e,t,n){try{for(var o={},i=0;i<e.length;i++){var a=e[i];o[a]=cc.sys.localStorage.getItem(a)}t(o)}catch(e){n(e)}},e.prototype.flushStorageData=function(e,t){try{Object.keys(e).forEach(function(t){cc.sys.localStorage.setItem(t,e[t])}),t(null)}catch(e){t(e)}},e.prototype.submitScore=function(e,t){},e.prototype.invite=function(e){e(null)},e.prototype.challenge=function(e){e(new Error("no need challenge now"))},e.prototype.getLeaderboard=function(e,t){},e.prototype.canShowAd=function(){return!0},e}();n.BenzWebPlatform=i,cc._RF.pop()},{"../Benz/BenzLog":"BenzLog"}],ButtonEffect:[function(e,t,n){"use strict";cc._RF.push(t,"4a399qKBRxMPbZe6i2VsB/e","ButtonEffect"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./AudioManager"),i=cc._decorator,a=i.ccclass,r=i.property,s=cc.Class({name:"BtnAnim",properties:{duration:{default:0,displayName:"Duration",tooltip:"\u65f6\u95f4"},scale:{default:0,displayName:"Scale",tooltip:"\u7f29\u653e\u503c"}},__ctor__:function(e,t){this.duration=e,this.scale=t}}),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playSound=!0,t.playScale=!0,t.playScaleOnEnable=!1,t.sequence=[new s(.1,1.3),new s(.1,.8),new s(.1,1)],t}return __extends(t,e),t.prototype.onLoad=function(){this.node.on("click",this._onItemClick,this);var e=this.node.getComponent(cc.Button);null!=e&&e.transition==cc.Button.Transition.SCALE&&(e.transition=cc.Button.Transition.NONE)},t.prototype.onEnable=function(){this.node.stopAllActions(),this.node.scale=1,this.playScaleOnEnable&&this._playAnim()},t.prototype.onDestroy=function(){this.node.off("click",this._onItemClick,this)},t.prototype._onItemClick=function(){this.playSound&&o.default.instance.play(o.SoundName.ClickBtn),this._playAnim()},t.prototype._playAnim=function(){if(this.playScale){for(var e=null,t=0,n=this.sequence;t<n.length;t++){var o=n[t];e=null==e?cc.scaleTo(o.duration,o.scale):cc.sequence(e,cc.scaleTo(o.duration,o.scale))}this.node.scale=1,null!=e&&this.node.runAction(e)}},__decorate([r],t.prototype,"playSound",void 0),__decorate([r],t.prototype,"playScale",void 0),__decorate([r],t.prototype,"playScaleOnEnable",void 0),__decorate([r([s])],t.prototype,"sequence",void 0),t=__decorate([a],t)}(cc.Component);n.default=c,cc._RF.pop()},{"./AudioManager":"AudioManager"}],ChangeAnimCtrl:[function(e,t,n){"use strict";cc._RF.push(t,"fae46xWMCRIt7bqYkOpG9w1","ChangeAnimCtrl"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameManager"),i=cc._decorator,a=i.ccclass,r=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moveNode=null,t.centerNode=null,t.lastNode=null,t.speed=100,t._forwardEnd=-2250,t._reverseEnd=0,t._forwardTime=0,t._reverseTime=0,t}var n;return __extends(t,e),n=t,t.prototype.onLoad=function(){var e=cc.winSize.height-1280;this.centerNode.height=e+1e3,this.lastNode.y=3282+e,this._reverseEnd=-4250-e,this._forwardTime=Math.abs(cc.winSize.height/2-this._forwardEnd)/this.speed,this._reverseTime=Math.abs(this._reverseEnd-this._forwardEnd)/this.speed},t.playForward=function(e,t,i){void 0===e&&(e=null),void 0===t&&(t=!0),void 0===i&&(i=-1),this._instance?this._instance._show(!0,e,i,t):cc.loader.loadRes("prefabs/ChangeAnimPanel",cc.Prefab,function(a,r){var s=cc.instantiate(r);s.parent=o.default.instance.node;var c=s.getComponent(n);n._instance=c,c._show(!0,e,i,t)})},t.playReverse=function(e,t,i){void 0===e&&(e=null),void 0===t&&(t=!0),void 0===i&&(i=-1),this._instance?this._instance._show(!1,e,i,t):cc.loader.loadRes("prefabs/ChangeAnimPanel",cc.Prefab,function(a,r){var s=cc.instantiate(r);s.parent=o.default.instance.node;var c=s.getComponent(n);n._instance=c,c._show(!1,e,i,t)})},t.prototype._show=function(e,t,n,o){this.node.active=!0,n<0&&(n=this.node.parent.childrenCount-1),this.node.setSiblingIndex(n);var i=this;this.moveNode.stopAllActions(),e?(this.moveNode.y=cc.winSize.height/2,this.moveNode.runAction(cc.sequence(cc.moveTo(this._forwardTime,cc.v2(0,this._forwardEnd)),cc.callFunc(function(){o&&(i.node.active=!1),t&&t()})))):(this.moveNode.y=this._forwardEnd,this.moveNode.runAction(cc.sequence(cc.moveTo(this._reverseTime,cc.v2(0,this._reverseEnd)),cc.callFunc(function(){o&&(i.node.active=!1),t&&t()}))))},t._instance=null,__decorate([r(cc.Node)],t.prototype,"moveNode",void 0),__decorate([r(cc.Node)],t.prototype,"centerNode",void 0),__decorate([r(cc.Node)],t.prototype,"lastNode",void 0),__decorate([r],t.prototype,"speed",void 0),t=n=__decorate([a],t)}(cc.Component);n.default=s,cc._RF.pop()},{"./GameManager":"GameManager"}],DataManager:[function(e,t,n){"use strict";cc._RF.push(t,"e2e144pmG5IiJ3fBcdcZpyQ","DataManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Collection/Dictionary"),i=e("./Platform/BenzPlatformManager"),a=e("./Benz/BenzLog"),r=e("./GameManager"),s=function(){function e(){this._isLocalStorage=!1,this._isModify=!1,this._rootDataKeyArray=[],this._records=new o.Dictionary}return e.getInstance=function(){return this._instance},e.prototype.init=function(){a.BenzLog.log("[DataManager] Init"),this.addRootDataKey(e.GAME_COMMON_DATA),this.addRootDataKey(e.GAME_RECORD_DATA);var t=this;try{i.BenzPlatformManager.loadStorageData(t._rootDataKeyArray,function(n){n?(t._rootDataKeyArray.forEach(function(o){if(e.GAME_COMMON_DATA==o){var i=JSON.parse(n[e.GAME_COMMON_DATA]);if(i)Object.keys(i).forEach(function(e){t._records.set(e,i[e])})}else try{t._records.set(o,n[o])}catch(e){a.BenzLog.log("[DataManager] Get Root Data error: "+o)}}),t.initWithData()):t.initWithData()},function(e){t._isLocalStorage=!0,t.initWithData(),a.BenzLog.logError(e)})}catch(e){t._isLocalStorage=!0,t.initWithData()}},e.prototype.addRootDataKey=function(e){this._rootDataKeyArray.push(e)},e.prototype.initWithData=function(){if(a.BenzLog.log("[DataManager] initWithData"),this._isLocalStorage)try{var t=this;t._rootDataKeyArray.forEach(function(n){if(e.GAME_COMMON_DATA==n){var o=JSON.parse(cc.sys.localStorage.getItem(e.GAME_COMMON_DATA));if(o)Object.keys(o).forEach(function(e){t._records.set(e,o[e])})}else try{t._records.set(n,cc.sys.localStorage.getItem(n))}catch(e){a.BenzLog.log("[DataManager] Get Root Local Data error: "+n)}})}catch(e){a.BenzLog.log("[DataManager] initWithData read local data fail"),a.BenzLog.logError(e)}r.default.instance.init()},e.prototype.flushCommon=function(){this.flush([e.GAME_COMMON_DATA])},e.prototype.flush=function(t){if(a.BenzLog.log("[DataManager] flush"),this._isModify){var n;a.BenzLog.log("[DataManager] flush 1"),n=t||this._rootDataKeyArray;try{for(var o={},r=0;r<n.length;r++){var s=n[r];e.GAME_COMMON_DATA==s?o[s]=this.getCommonData():o[s]=this.getItem(s).toString()}i.BenzPlatformManager.flushStorageData(o,function(e){e&&(Object.keys(o).forEach(function(e){cc.sys.localStorage.setItem(e,o[e])}),a.BenzLog.logError(e))}),this._isModify=!1}catch(e){a.BenzLog.log("[DataManager] flush data fail"),a.BenzLog.logError(e)}}},e.prototype.getCommonData=function(){var e=this._records.keys;if(e&&e.length>0){for(var t={},n=this._records.keys,o=0;o<n.length;o++){var i=n[o];this._rootDataKeyArray.indexOf(i)<0&&(t[i]=this._records.get(i))}return JSON.stringify(t)}return""},e.prototype.getItem=function(e){return this._records.get(e)},e.prototype.setItem=function(e,t){return this._isModify=!0,this._records.set(e,t),!0},e.prototype.removeItem=function(e){this._isModify=!0,this._records.remove(e)},e.prototype.containsKey=function(e){return this._records.containsKey(e)},e.prototype.getIntegerForKey=function(e,t){if(!this.containsKey(e))return t;var n=this.getItem(e);try{return parseInt(n.toString())}catch(e){}return t},e.prototype.getBooleanForKey=function(e,t){return this.containsKey(e)?"true"===this.getItem(e).toString():t},e.prototype.getStringForKey=function(e,t){return this.containsKey(e)?this.getItem(e):t},e.prototype.getFloatForKey=function(e,t){if(!this.containsKey(e))return t;var n=this.getItem(e);try{return parseFloat(n.toString())}catch(e){}return t},e.GAME_COMMON_DATA="game_hexagon_common_data",e.GAME_RECORD_DATA="game_hexagon_record_data",e._instance=new e,e}();n.DataManager=s,cc._RF.pop()},{"./Benz/BenzLog":"BenzLog","./Collection/Dictionary":"Dictionary","./GameManager":"GameManager","./Platform/BenzPlatformManager":"BenzPlatformManager"}],Dictionary:[function(e,t,n){"use strict";cc._RF.push(t,"ba8c4PmPSJLALdFOgytvnQO","Dictionary"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this.m_keys=[],this.m_values=[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.m_keys.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){return this.m_values.concat()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keys",{get:function(){return this.m_keys.concat()},enumerable:!0,configurable:!0}),e.prototype.indexOfKey=function(e){return this.m_keys.indexOf(e)},e.prototype.indexOfValue=function(e){return this.m_values.indexOf(e)},e.prototype.getKeyByValue=function(e){return this.m_keys[this.indexOfValue(e)]},e.prototype.add=function(e,t){var n=this.indexOfKey(e);n>=0?this.m_values[n]=t:(this.m_keys.push(e),this.m_values.push(t))},e.prototype.get=function(e){var t=this.indexOfKey(e);return t>=0?this.m_values[t]:null},e.prototype.set=function(e,t){var n=this.indexOfKey(e);n>=0?this.m_values[n]=t:this.add(e,t)},e.prototype.remove=function(e){var t=this.indexOfKey(e);return t>=0?(this.m_keys.splice(t,1),this.m_values.splice(t,1)[0]):null},e.prototype.containsKey=function(e){return this.indexOfKey(e)>=0},e.prototype.clear=function(){this.m_keys.length=0,this.m_values.length=0},e.prototype.setLength=function(e){this.m_keys.length=e,this.m_values.length=e},e.prototype.getRandomData=function(){var e=Math.random()*this.keys.length<<0;return this.m_values[e]},e}();n.Dictionary=o,cc._RF.pop()},{}],GameManager:[function(e,t,n){"use strict";cc._RF.push(t,"94556EtkUtDQJrkqHyoE9Gf","GameManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GamePanelCtrl"),i=e("./StartPanelCtrl"),a=e("./PausePanelCtrl"),r=e("./OverPanelCtrl"),s=e("./ChangeAnimCtrl"),c=e("./SynthesisAnimNode"),l=e("./GameToolCtrl"),h=e("./HexGenerateData"),u=e("./HexItemData"),d=e("./AdsManager"),p=e("./Platform/BenzPlatformManager"),_=e("./RulePanelCtrl"),f=e("./GuidePanelCtrl"),g=e("./DataManager"),m=cc._decorator,y=m.ccclass,v=m.property,b=function(){return function(){this.map=[],this.currentScore=0,this.highestScore=0,this.maxNum=0}}(),P=function(){return function(){this.hammerCount=1,this.bombCount=1,this.refreshCount=1,this.hammerUsedCount=0,this.bombUsedCount=0,this.refreshUsedCount=0}}(),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.atlas=null,t.is4399Platform=!1,t.Logo=null,t.hexSize=48,t.hexYOffset=6,t.explosionNum=10,t.generateMaxNum=8,t.synthesisAnimTime=1.5,t.blackTime=120,t.lockStep=10,t.zeroRate=.05,t.hideRate=.01,t._startPanel=null,t._gamePanel=null,t._pausePanel=null,t._overPanel=null,t._rulePanel=null,t._timeSinceStartup=0,t._isLoading=!1,t._gameRecord=null,t._toolCountRecord=null,t._generateHexRecord=null,t._synthesisNodePool=[],t._lockItems=[],t._extraHexGenerateDatas=[],t._showAd=!1,t._showZeroTip=!1,t._showHideHexTip=!1,t}var n;return __extends(t,e),n=t,Object.defineProperty(t.prototype,"timeSinceStartup",{get:function(){return this._timeSinceStartup},enumerable:!0,configurable:!0}),Object.defineProperty(t,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){n._instance=this,p.BenzPlatformManager.initPlatform(),g.DataManager.getInstance().init(),d.AdsManager.getInstance().init();var e=this.getComponent(cc.Canvas);if(e){var t=cc.winSize.height/cc.winSize.width<1.777778;e.fitHeight=t,e.fitWidth=!t}this.is4399Platform?this.Logo&&(this.Logo.active=!0,this.Logo.zIndex=100):this.Logo&&(this.Logo.active=!1)},t.prototype.init=function(){var e=g.DataManager.getInstance().getItem(g.DataManager.GAME_RECORD_DATA);this._gameRecord=e?JSON.parse(e):new b;var t=g.DataManager.getInstance().getItem("toolRecord");this._toolCountRecord=t?JSON.parse(t):new P;var n=g.DataManager.getInstance().getItem("generateHexRecord");if(n){var o=JSON.parse(n);this._generateHexRecord=new h.default,this._generateHexRecord.refresh(o.nums,o.dir,o.hideIndex)}var i=g.DataManager.getInstance().getItem("rewardHexsRecord");if(i)for(var a=0,r=JSON.parse(i);a<r.length;a++){o=r[a];var s=new h.default;s.refresh(o.nums,o.dir,o.hideIndex),this._extraHexGenerateDatas.push(s)}this._showHideHexTip=g.DataManager.getInstance().getBooleanForKey("showHideHexTip",!1),this._showZeroTip=g.DataManager.getInstance().getBooleanForKey("showZeroTip",!1),g.DataManager.getInstance().getBooleanForKey("isGuide",!1)?this.showStartPanel(!1):(f.default.showGuide(1),g.DataManager.getInstance().setItem("isGuide",!0),g.DataManager.getInstance().flushCommon())},t.prototype.update=function(e){this._timeSinceStartup+=e},t.prototype.getSpriteFrame=function(e){return this.atlas.getSpriteFrame(e)},t.prototype.showGamePanel=function(){var e=this;s.default.playForward(function(){if(e._setOtherPanelHide("GamePanelCtrl"),e._gamePanel)e._gamePanel.node.active=!0,e._showAd&&(d.AdsManager.getInstance().showInterstitialAd(),e.setShowAd(!1)),s.default.playReverse();else{if(e._isLoading)return;e._isLoading=!0,cc.loader.loadRes("prefabs/GamePanel",cc.Prefab,function(t,n){e._isLoading=!1;var i=cc.instantiate(n);i.parent=e.node,e._gamePanel=i.getComponent(o.default),s.default.playReverse()})}},!1)},t.prototype.showStartPanel=function(e){void 0===e&&(e=!0);var t=this;e?s.default.playForward(function(){t._setOtherPanelHide("StartPanelCtrl"),t._startPanel?(t._startPanel.node.active=!0,s.default.playReverse(),f.default.instance&&f.default.instance.destroyGuidePanel()):t._createStartPanel(!0)},!1):(this._setOtherPanelHide("StartPanelCtrl"),t._startPanel?(t._startPanel.node.active=!0,f.default.instance&&f.default.instance.destroyGuidePanel()):this._createStartPanel(!1))},t.prototype._setOtherPanelHide=function(e){this._startPanel&&typeof this._startPanel!=e&&(this._startPanel.node.active=!1),this._gamePanel&&typeof this._gamePanel!=e&&(this._gamePanel.node.active=!1),this._pausePanel&&typeof this._pausePanel!=e&&(this._pausePanel.node.active=!1),this._overPanel&&typeof this._overPanel!=e&&(this._overPanel.node.active=!1),this._rulePanel&&typeof this._rulePanel!=e&&(this._rulePanel.node.active=!1)},t.prototype._createStartPanel=function(e){var t=this;t._isLoading||(t._isLoading=!0,cc.loader.loadRes("prefabs/StartPanel",cc.Prefab,function(n,o){t._isLoading=!1;var a=cc.instantiate(o);a.parent=t.node,t._startPanel=a.getComponent(i.default),f.default.instance&&f.default.instance.destroyGuidePanel(),e&&s.default.playReverse()}))},t.prototype.showPausePanel=function(){if(this._pausePanel)this._pausePanel.node.active=!0;else{if(this._isLoading)return;this._isLoading=!0;var e=this;cc.loader.loadRes("prefabs/PausePanel",cc.Prefab,function(t,n){e._isLoading=!1;var o=cc.instantiate(n);o.parent=e.node,e._pausePanel=o.getComponent(a.default)})}},t.prototype.showOverPanel=function(e){if(this._setOtherPanelHide("OverPanelCtrl"),this._overPanel)this._overPanel.init(e),this._overPanel.node.active=!0;else{if(this._isLoading)return;this._isLoading=!0;var t=this;cc.loader.loadRes("prefabs/OverPanel",cc.Prefab,function(n,o){t._isLoading=!1;var i=cc.instantiate(o);i.parent=t.node,t._overPanel=i.getComponent(r.default),t._overPanel.init(e)})}},t.prototype.showRulePanel=function(e){void 0===e&&(e=!0);var t=this;e?s.default.playForward(function(){t._setOtherPanelHide("RulePanelCtrl"),t._rulePanel?(t._rulePanel.node.active=!0,t._rulePanel.refresh(),s.default.playReverse()):t._createRulePanel(!0)},!1):(this._setOtherPanelHide("RulePanelCtrl"),t._rulePanel?(t._rulePanel.node.active=!0,t._rulePanel.refresh()):this._createRulePanel(!1))},t.prototype._createRulePanel=function(e){if(!this._isLoading){this._isLoading=!0;var t=this;cc.loader.loadRes("prefabs/RulePanel",cc.Prefab,function(n,o){t._isLoading=!1;var i=cc.instantiate(o);i.parent=t.node,t._rulePanel=i.getComponent(_.default),e&&s.default.playReverse()})}},t.prototype.hideRulePanel=function(){this._startPanel?this.showGamePanel():this.showStartPanel()},t.prototype.restartGame=function(){this._lockItems.length=0,this._extraHexGenerateDatas.length=0,this._saveRewardHexsRecord(),null!=this._gamePanel&&this._gamePanel.reset()},t.prototype.getRecordMapData=function(e){return this._gameRecord.map.length<=e&&this._gameRecord.map.push(new u.default),this._gameRecord.map[e]},t.prototype.getRecordCurrentScore=function(){return this._gameRecord.currentScore},t.prototype.saveGameRecord=function(){if(this._gamePanel){for(var e=this._gamePanel.hexItems,t=this._gamePanel.score,n=this._gamePanel.maxNum,o=0,i=e;o<i.length;o++)for(var a=0,r=i[o];a<r.length;a++){var s=r[a];if(s){var c=this._gameRecord.map[s.index];c.num=s.num,c.lockStep=s.lockStep,c.blackLeftTime=s.blackLeftTime}}this._gameRecord.currentScore=t,this._gameRecord.maxNum=n,t>this._gameRecord.highestScore&&(this._gameRecord.highestScore=t),g.DataManager.getInstance().setItem(g.DataManager.GAME_RECORD_DATA,JSON.stringify(this._gameRecord)),g.DataManager.getInstance().flush([g.DataManager.GAME_RECORD_DATA])}},t.prototype.getHighestScore=function(){return this._gameRecord.highestScore},t.prototype.getRecordMaxNum=function(){return this._gameRecord.maxNum},t.prototype.getItemColor=function(e){switch(e){case 0:return cc.color(61,61,61);case 1:return cc.color(183,200,208);case 2:return cc.color(84,175,39);case 3:return cc.color(175,74,212);case 4:return cc.color(84,128,210);case 5:return cc.color(192,127,211);case 6:return cc.color(184,154,10);case 7:return cc.color(209,151,69);case 8:return cc.color(254,152,70);case 9:return cc.color(255,106,107);case 10:return cc.color(255,255,255)}return cc.color(255,255,255)},t.prototype.showSynthesisAnim=function(e,t){this._gamePanel&&this._gamePanel.showSynthesisAnim(e,t)},t.prototype.recycleSynthesisAnimNode=function(e){this._synthesisNodePool.push(e)},t.prototype.getSynthesisAnimNode=function(){if(this._synthesisNodePool.length>0){var e=this._synthesisNodePool.pop();return e.clear(),e}return new c.default},t.prototype.setToolCount=function(e,t){switch(null==this._toolCountRecord&&(this._toolCountRecord=new P),e){case l.ToolType.Bomb:this._toolCountRecord.bombCount=t;break;case l.ToolType.Hammer:this._toolCountRecord.hammerCount=t;break;case l.ToolType.Refresh:this._toolCountRecord.refreshCount=t}},t.prototype.setToolUsedCount=function(e,t){switch(e){case l.ToolType.Bomb:this._toolCountRecord.bombUsedCount=t;break;case l.ToolType.Hammer:this._toolCountRecord.hammerUsedCount=t;break;case l.ToolType.Refresh:this._toolCountRecord.refreshUsedCount=t}},t.prototype.getToolCount=function(e){switch(e){case l.ToolType.Bomb:return this._toolCountRecord.bombCount;case l.ToolType.Hammer:return this._toolCountRecord.hammerCount;case l.ToolType.Refresh:return this._toolCountRecord.refreshCount}return 0},t.prototype.getToolUsedCount=function(e){switch(e){case l.ToolType.Bomb:return this._toolCountRecord.bombUsedCount;case l.ToolType.Hammer:return this._toolCountRecord.hammerUsedCount;case l.ToolType.Refresh:return this._toolCountRecord.refreshUsedCount}return 0},t.prototype.saveToolCountRecord=function(){g.DataManager.getInstance().setItem("toolRecord",JSON.stringify(this._toolCountRecord)),g.DataManager.getInstance().flushCommon()},t.prototype.setGenerateHexRecord=function(e){this._generateHexRecord=e,g.DataManager.getInstance().setItem("generateHexRecord",JSON.stringify(this._generateHexRecord)),g.DataManager.getInstance().flushCommon()},t.prototype.getGenerateHexRecord=function(){return this._generateHexRecord},t.prototype.registerLock=function(e){this._lockItems.push(e)},t.prototype.addStep=function(){for(var e=this._lockItems.length-1;e>=0;e--){this._lockItems[e].reduceLockStep()&&this._lockItems.splice(e,1)}},t.prototype.addRewardHexs=function(e){e.length<=0||(this._extraHexGenerateDatas=this._extraHexGenerateDatas.concat(e),this._saveRewardHexsRecord())},t.prototype.useRewardHex=function(e){var t=this._extraHexGenerateDatas.indexOf(e);t>=0&&(this._extraHexGenerateDatas.splice(t,1),this._saveRewardHexsRecord(),this._gamePanel&&(this._gamePanel.useRewardHex(e),this._gamePanel.refreshRewardHexsNum()))},t.prototype.getRewardHexsCount=function(){return this._extraHexGenerateDatas.length},t.prototype.getRewardHexs=function(){return this._extraHexGenerateDatas},t.prototype._saveRewardHexsRecord=function(){g.DataManager.getInstance().setItem("rewardHexsRecord",JSON.stringify(this._extraHexGenerateDatas)),g.DataManager.getInstance().flushCommon()},t.prototype.setShowAd=function(e){this._showAd=e},t.prototype.checkSpecialTip=function(e){this._gamePanel&&(e.isHide&&!this._showHideHexTip?(this._gamePanel.showHideHexTip(e),this._showHideHexTip=!0,g.DataManager.getInstance().setItem("showHideHexTip",!0),g.DataManager.getInstance().flushCommon()):0!=e.num||this._showZeroTip||(this._gamePanel.showZeroTip(e),this._showZeroTip=!0,g.DataManager.getInstance().setItem("showZeroTip",!0),g.DataManager.getInstance().flushCommon()))},t.prototype.showRewards=function(e){this._gamePanel&&this._gamePanel.showRewards(e)},t.prototype.addTool=function(e){this._gamePanel&&this._gamePanel.addTool(e)},t._instance=null,__decorate([v(cc.SpriteAtlas)],t.prototype,"atlas",void 0),__decorate([v],t.prototype,"is4399Platform",void 0),__decorate([v(cc.Node)],t.prototype,"Logo",void 0),__decorate([v],t.prototype,"hexSize",void 0),__decorate([v],t.prototype,"hexYOffset",void 0),__decorate([v],t.prototype,"explosionNum",void 0),__decorate([v],t.prototype,"generateMaxNum",void 0),__decorate([v],t.prototype,"synthesisAnimTime",void 0),__decorate([v],t.prototype,"blackTime",void 0),__decorate([v],t.prototype,"lockStep",void 0),__decorate([v],t.prototype,"zeroRate",void 0),__decorate([v],t.prototype,"hideRate",void 0),t=n=__decorate([y],t)}(cc.Component);n.default=C,cc._RF.pop()},{"./AdsManager":"AdsManager","./ChangeAnimCtrl":"ChangeAnimCtrl","./DataManager":"DataManager","./GamePanelCtrl":"GamePanelCtrl","./GameToolCtrl":"GameToolCtrl","./GuidePanelCtrl":"GuidePanelCtrl","./HexGenerateData":"HexGenerateData","./HexItemData":"HexItemData","./OverPanelCtrl":"OverPanelCtrl","./PausePanelCtrl":"PausePanelCtrl","./Platform/BenzPlatformManager":"BenzPlatformManager","./RulePanelCtrl":"RulePanelCtrl","./StartPanelCtrl":"StartPanelCtrl","./SynthesisAnimNode":"SynthesisAnimNode"}],GamePanelCtrl:[function(e,t,n){"use strict";cc._RF.push(t,"e16edgIybhNyok4lmZnNR0U","GamePanelCtrl"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./HexItem"),i=e("./HexGenerateCtrl"),a=e("./GameManager"),r=e("./NetHex"),s=e("./GameToolCtrl"),c=e("./Collection/Queue"),l=e("./SynthesisAnimInfo"),h=e("./HexGenerateData"),u=e("./RewardHexsPanelCtrl"),d=e("./AudioManager"),p=e("./LanguageManager"),_=e("./Platform/BenzPlatformManager"),f=e("./AdRewardTipPanelCtrl"),g=cc._decorator,m=g.ccclass,y=g.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hexsOffset=50,t.mapLength=7,t.hexParent=null,t.hexPrefab=null,t.rorateArrow=null,t.recordTip=null,t.recordLabel=null,t.scoreLabel=null,t.hexGenerateCtrl=null,t.matchThreshold=30,t.editBox=null,t.rightTog=null,t.rightBottomTog=null,t.leftBottomTog=null,t.skeleton=null,t.toolMask=null,t.bombTool=null,t.hammerTool=null,t.refreshTool=null,t.tipPanel=null,t.tipContent=null,t.tipBg=null,t.gainScoreLabel=null,t.rewardBtnIcon=null,t.rewardHexsNumLab=null,t.rewardSkeleton=null,t.rewardItemsParent=null,t.adBtn=null,t.adBtnLabel=null,t.speed=300,t._hexItems=[[]],t._moveCheckRate=10,t._maxNum=1,t._synthesisNodes=[],t._score=0,t._startTime=0,t._toolType=s.ToolType.None,t._animQueue=new c.Queue,t._animing=!1,t._rewardNum=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"hexItems",{get:function(){return this._hexItems},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxNum",{get:function(){return this._maxNum},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rewardNum",{get:function(){return this._rewardNum},set:function(e){this._rewardNum=e,this.rewardHexsNumLab.string=e.toString()},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.recordTip.string=p.default.instance.getString("highestScore"),this.adBtnLabel.string=p.default.instance.getString("adBtnLabel"),this.tipPanel.on(cc.Node.EventType.TOUCH_START,function(){this.tipPanel.active=!1},this);var e=this;this.rewardSkeleton.node.active=!1,this.rewardSkeleton.setCompleteListener(function(){e.rewardSkeleton.node.active=!1}),this.skeleton.node.active=!1,this.skeleton.setCompleteListener(function(){e.skeleton.node.active=!1})},t.prototype.start=function(){var e=this;this.hexGenerateCtrl.init(function(t){e._onMoveCheck(t)},function(t){e._onDrop(t)}),this._score=a.default.instance.getRecordCurrentScore(),this._refreshScoreLabel(),this._maxNum=a.default.instance.getRecordMaxNum(),this._initHex(this.mapLength);var t=a.default.instance.getGenerateHexRecord();t?this.hexGenerateCtrl.refreshHexs(t.nums,t.dir,t.hideIndex,!1,!1):this._generateHex(),this._startTime=a.default.instance.timeSinceStartup,this.rorateArrow.runAction(cc.repeatForever(cc.rotateBy(7,360))),this.gainScoreLabel.node.active=!1,this._setToolMask(!1),this.bombTool.init(s.ToolType.Bomb,function(){e._useTool(s.ToolType.Bomb)},function(t,n){e._showTip(t,n)}),this.hammerTool.init(s.ToolType.Hammer,function(){e._useTool(s.ToolType.Hammer)},function(t,n){e._showTip(t,n)}),this.refreshTool.init(s.ToolType.Refresh,function(){e._useTool(s.ToolType.Refresh)},function(t,n){e._showTip(t,n)}),this.refreshRewardHexsNum(),this._refreshAdBtnState()},t.prototype._initHex=function(e){for(var t=this,n=Math.floor(e>>1),i=n%2==0,r=0,s=0;s<e;s++){var c=Math.abs(s-n),l=Math.floor(c>>1);s%2>0&&i&&l++;for(var h=l+e-c,u=0;u<e;u++)if(0==s&&(this._hexItems[u]=[]),u<l||u>=h)this._hexItems[u][s]=null;else{var d=cc.instantiate(this.hexPrefab);d.parent=this.hexParent;var p=d.getComponent(o.default),_=a.default.instance.getRecordMapData(r);p.init(u,s,r,_,function(e){t._onItem(e)}),this._hexItems[u][s]=p,r++,u==n&&s==n&&(this.hexParent.position=cc.v2(-p.node.x,-p.node.y+this.hexsOffset))}}this.skeleton.node.setSiblingIndex(this.skeleton.node.parent.childrenCount-1)},t.prototype.reset=function(){this._animing=!1;for(var e=this._animQueue.count,t=0;t<e;t++)this._animQueue.dequeue().recycle();this.node.active=!0,this._score=0,this._refreshScoreLabel(),this._maxNum=1,this.bombTool.clear(),this.hammerTool.clear(),this.refreshTool.clear(),this.tipPanel.active=!1,this._startTime=a.default.instance.timeSinceStartup;for(var n=0,o=this._hexItems;n<o.length;n++)for(var i=0,r=o[n];i<r.length;i++){var s=r[i];s&&(s.stopAnim(),s.refreshState(-2))}this._generateHex(),this.gainScoreLabel.node.stopAllActions(),this.gainScoreLabel.node.active=!1,a.default.instance.saveGameRecord(),a.default.instance.saveToolCountRecord(),this.refreshRewardHexsNum()},t.prototype._refreshScoreLabel=function(){this.scoreLabel.string=this._score.toString(),this.recordLabel.string=a.default.instance.getHighestScore().toString()},t.prototype.showSynthesisAnim=function(e,t){this.skeleton.node.active=!0,this.skeleton.node.setPosition(e),this.skeleton.node.color=t,this.skeleton.setAnimation(0,"baokai_effect",!1)},t.prototype._generateHex=function(e,t,n){void 0===e&&(e=2),void 0===t&&(t=[]),void 0===n&&(n=!1),this.hexGenerateCtrl.refresh(this._maxNum,e,t,n)},t.prototype._onMoveCheck=function(e){this._moveCheckRate--,this._moveCheckRate>0||(this._moveCheckRate=5,this._matchItems(e,!1))},t.prototype._onDrop=function(e){this._matchItems(e,!0)&&(d.default.instance.play(d.SoundName.HexPut),a.default.instance.addStep(),a.default.instance.saveGameRecord(),this._checkHex())},t.prototype._matchItems=function(e,t){for(var n=[],o=0,i=this._hexItems;o<i.length;o++)for(var a=0,r=i[o];a<r.length;a++){var s=r[a];if(null!=s&&s.isEmpty){if(n.length<e.length)for(var c=0,l=e;c<l.length;c++){var h=l[c];if(this._isMatch(h,s)){s.setCacheNum(h.num,h.isCenter,h.isHide),n.push(s);break}}s.refreshState(-2)}}if(n.length>=e.length){if(t){for(var u=0,d=n;u<d.length;u++){(h=d[u]).useCacheNum()}this._checkSynthesis(n),this._animing||this._playSynthesisAnim()}else for(var p=0,_=n;p<_.length;p++){(h=_[p]).refreshState(-1)}return!0}return!1},t.prototype._isMatch=function(e,t){var n=t.node.position.add(this.hexParent.position),o=this.hexGenerateCtrl.getItemPos(e);return n.sub(o).mag()<=this.matchThreshold},t.prototype._checkSynthesis=function(e){if(!(e.length<=0)){e.sort(function(e,t){return e.num==t.num?e.isCenter?1:-1:t.num-e.num});var t=e.pop();if(!t.isEmpty)if(t.num>=a.default.instance.explosionNum)this._animQueue.enqueue(this._explosion(t));else{this._synthesisNodes.length=0;var n=a.default.instance.getSynthesisAnimNode();this._synthesisNodes.push(t);var o=[n];if(n.init(t),o=o.concat(this._getSynthesisItem([n])),this._synthesisNodes.length>=3)if(t.num>0){for(var i=0,r=this._synthesisNodes;i<r.length;i++){(p=r[i])==t?p.carry():p.refreshState(-2,!1)}this._maxNum<t.num&&t.num<=a.default.instance.generateMaxNum&&(this._maxNum=t.num);var s=t.num*this._synthesisNodes.length*(this._animQueue.count+1);this._score+=s,this._animQueue.enqueue(new l.default(o,l.SynthesisAnimType.Carry,s)),e.push(t)}else{for(var c=[],u=0,d=this._synthesisNodes;u<d.length;u++){var p;(p=d[u]).refreshState(-2,!1);var _=new h.default;_.init(a.default.instance.explosionNum,2),c.push(_)}a.default.instance.addRewardHexs(c),this._animQueue.enqueue(new l.default(o,l.SynthesisAnimType.Reward,0,c))}else for(var f=0,g=o;f<g.length;f++){var m=g[f];a.default.instance.recycleSynthesisAnimNode(m)}}this._checkSynthesis(e)}},t.prototype.asyncWait=function(e){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(n){return[2,new Promise(function(n,o){var i=a.default.instance.timeSinceStartup;t.scheduleOnce(function(){n(i<this._startTime)},e)})]})})},t.prototype._getSynthesisItem=function(e){if(e.length<=0)return[];for(var t=[],n=0,o=e;n<o.length;n++)for(var i=o[n],r=i.item,s=r.getNeighbor(),c=r.num,l=0,h=s;l<h.length;l++){var u=h[l],d=this._hexItems[u.x];if(void 0!==d){var p=d[u.y];if(p&&p.num==c&&this._synthesisNodes.indexOf(p)<0){var _=a.default.instance.getSynthesisAnimNode();_.init(p),i.addChild(_),this._synthesisNodes.push(p),t.push(_)}}}return t=t.concat(this._getSynthesisItem(t))},t.prototype._explosion=function(e){var t=a.default.instance.getSynthesisAnimNode();t.init(e);var n=e.num;e.refreshState(-2,!1);for(var o=[],i=0,r=e.getNeighbor();i<r.length;i++){var s=r[i],c=this._hexItems[s.x];if(void 0!==c){var u=c[s.y];if(u&&!u.isEmpty){if(0==u.num){var d=new h.default;d.init(a.default.instance.explosionNum,2),o.push(d)}var p=a.default.instance.getSynthesisAnimNode();p.init(u),t.addChild(p),n+=u.num,u.refreshState(-2,!1)}}}return a.default.instance.addRewardHexs(o),this._score+=n,new l.default([t],l.SynthesisAnimType.Explosion,n,o)},t.prototype._playSynthesisAnim=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n;return __generator(this,function(o){switch(o.label){case 0:if(this._animQueue.count<=0)return this._animing=!1,[2];switch(this._animing=!0,e=this._animQueue.dequeue(),t=!1,e.type){case l.SynthesisAnimType.Explosion:return[3,1];case l.SynthesisAnimType.Carry:return[3,3];case l.SynthesisAnimType.Reward:return[3,5]}return[3,7];case 1:return this._playExplosion(e),[4,this.asyncWait(.2)];case 2:return(t=o.sent())?[2]:(e.rewards.length>0&&u.default.showRewards(e.rewards,!0),[3,7]);case 3:return n=e.getFirstNode().item,e.playCarryAnim(),this.scheduleOnce(function(){this._gainScore(n,e.score)},a.default.instance.synthesisAnimTime+.1),[4,this.asyncWait(a.default.instance.synthesisAnimTime+.6)];case 4:return t=o.sent(),e.recycle(),t?[2]:[3,7];case 5:return e.playCarryAnim(),[4,this.asyncWait(a.default.instance.synthesisAnimTime+.6)];case 6:return t=o.sent(),e.recycle(),t?[2]:(u.default.showRewards(e.rewards,!0),[3,7]);case 7:return this._playSynthesisAnim(),[2]}})})},t.prototype._playExplosion=function(e){var t=e.getFirstNode(),n=t.item;n.playExplosionEffect();for(var o=0,i=t.children;o<i.length;o++){i[o].item.playExplosionEffect()}this._gainScore(n,e.score),e.recycle(),d.default.instance.play(d.SoundName.Boom,!1),this.scheduleOnce(function(){this.skeleton.node.active=!0,this.skeleton.node.setPosition(n.node.position),this.skeleton.node.color=cc.Color.WHITE,this.skeleton.setAnimation(0,"bomb_effect",!1),n.refreshIcon();for(var e=0,o=t.children;e<o.length;e++){o[e].item.refreshIcon()}},.4)},t.prototype._checkHex=function(e){void 0===e&&(e=!1);for(var t=[],n=!1,o=!1,i=!1,s=0,c=!1,l=0,h=this._hexItems;l<h.length;l++){for(var u=0,d=h[l];u<d.length;u++){var p=d[u];if(p&&p.isEmpty){var _,f;if(s<1&&(s=1),!n)(_=r.default.getRight()).add(p.hex),(f=this.getItem(_))&&f.isEmpty&&(t.push(0),n=!0,s=2);if(!o)(_=r.default.getRightBottom(p.hex.y%2>0)).add(p.hex),(f=this.getItem(_))&&f.isEmpty&&(t.push(1),o=!0,s=2);if(!i)(_=r.default.getLeftBottom(p.hex.y%2>0)).add(p.hex),(f=this.getItem(_))&&f.isEmpty&&(t.push(2),i=!0,s=2);if(n&&o&&i){c=!0;break}}}if(c)break}s<=0?(this.hexGenerateCtrl.hideItems(),a.default.instance.showOverPanel(this._score)):this._generateHex(s,t,e)},t.prototype.getItem=function(e){var t=this._hexItems[e.x];return void 0===t?null:t[e.y]},t.prototype.onCheat=function(){for(var e=[],t=0,n=this.editBox.string.split(",");t<n.length;t++){var o=n[t];e.push(parseInt(o))}var i=[];this.rightTog.isChecked&&i.push(0),this.rightBottomTog.isChecked&&i.push(1),this.leftBottomTog.isChecked&&i.push(2),this.hexGenerateCtrl.refreshHexs(e,i)},t.prototype.onPause=function(){a.default.instance.showPausePanel()},t.prototype._onItem=function(e){switch(this._toolType){case s.ToolType.None:return;case s.ToolType.Bomb:e.isEmpty&&this._useBoom(e);break;case s.ToolType.Hammer:e.isEmpty||this._useHammer(e);break;case s.ToolType.Refresh:}this._toolType=s.ToolType.None,this._setToolMask(!1)},t.prototype._useBoom=function(e){e.refreshState(a.default.instance.explosionNum),this._animQueue.enqueue(this._explosion(e)),this._animing||this._playSynthesisAnim(),a.default.instance.saveGameRecord(),this.bombTool.useTool()},t.prototype._useHammer=function(e){e.refreshState(-2,!1),this.skeleton.node.active=!0,this.skeleton.node.setPosition(e.node.position),this.skeleton.node.color=cc.Color.WHITE,this.skeleton.setAnimation(0,"chuizi_effect",!1),this.scheduleOnce(function(){e.refreshIcon()},.3),this.scheduleOnce(function(){d.default.instance.play(d.SoundName.HammerHit)},.2),this.hammerTool.useTool(),a.default.instance.saveGameRecord()},t.prototype._useRefresh=function(){this._checkHex(!0),this.refreshTool.useTool(),this._toolType=s.ToolType.None,this._setToolMask(!1)},t.prototype._useTool=function(e){e!=s.ToolType.Refresh?(this._toolType=e,this._setToolMask(!0,e==s.ToolType.Bomb)):this._useRefresh()},t.prototype.onMask=function(){this._toolType=s.ToolType.None,this._setToolMask(!1)},t.prototype._showTip=function(e,t){this.tipContent.string=t,this.tipPanel.setPosition(e),this.tipPanel.active=!0,this.scheduleOnce(function(){this.tipBg.height=this.tipContent.node.height+30},0)},t.prototype._gainScore=function(e,t){this.gainScoreLabel.string="+"+t;var n=this.gainScoreLabel.node;n.active=!0,n.scale=0,n.opacity=255,n.setPosition(e.node.position.add(this.hexParent.position)),n.color=a.default.instance.getItemColor(e.num),n.stopAllActions(),n.runAction(cc.sequence(cc.spawn(cc.scaleTo(.3,1),cc.moveBy(.3,cc.v2(0,60))),cc.callFunc(function(){d.default.instance.play(d.SoundName.GainScore)}),cc.delayTime(.6),cc.spawn(cc.moveBy(.2,cc.v2(0,60)),cc.fadeOut(.2)),cc.callFunc(function(){n.active=!1}))),this._refreshScoreLabel()},t.prototype._setToolMask=function(e,t){void 0===t&&(t=!1),this.toolMask.zIndex=1,this.toolMask.active=e;for(var n=0,o=this._hexItems;n<o.length;n++)for(var i=0,a=o[n];i<a.length;i++){var r=a[i];r&&(e?t?r.isEmpty&&(r.node.zIndex=2):r.isEmpty||(r.node.zIndex=2):r.node.zIndex=0)}if(e)this.hexParent.zIndex=1;else{this.hammerTool.node.zIndex=0,this.bombTool.node.zIndex=0;var s=this.refreshTool.node.getSiblingIndex();this.hammerTool.node.setSiblingIndex(s+1),this.bombTool.node.setSiblingIndex(s+2),this.hexParent.zIndex=0,this.hexParent.setSiblingIndex(this.hexGenerateCtrl.node.getSiblingIndex()-1)}},t.prototype.useRewardHex=function(e){this.hexGenerateCtrl.refreshHexs(e.nums,e.dir,e.hideIndex,!0)},t.prototype.onRewardHexsBtn=function(){var e=a.default.instance.getRewardHexs();u.default.showRewards(e,!1)},t.prototype.showZeroTip=function(e){var t=this.hexGenerateCtrl.getItemPos(e);this._showTip(t,p.default.instance.getString("zeroTip"))},t.prototype.showHideHexTip=function(e){var t=this.hexGenerateCtrl.getItemPos(e);this._showTip(t,p.default.instance.getString("rule4"))},t.prototype.showRewards=function(e){for(var t=this,n=cc.Vec2.ZERO,o=function(e){var o=e.node.convertToWorldSpaceAR(cc.Vec2.ZERO);o=i.rewardItemsParent.convertToNodeSpaceAR(o),e.node.parent=i.rewardItemsParent,e.node.setPosition(o),e.moveState(),e.node.stopAllActions();var a=o.mag()/i.speed;e.node.runAction(cc.sequence(cc.spawn(cc.scaleTo(a,0),cc.moveTo(a,n)),cc.callFunc(function(){e.node.active=!1,t._addRewardNum()})))},i=this,a=0,r=e;a<r.length;a++){o(r[a])}},t.prototype.refreshRewardHexsNum=function(){this.rewardNum=a.default.instance.getRewardHexsCount()},t.prototype._addRewardNum=function(){this.rewardNum++,this.rewardBtnIcon.stopAllActions(),this.rewardHexsNumLab.node.stopAllActions(),this.rewardBtnIcon.scale=1,this.rewardHexsNumLab.node.scale=1,this.rewardBtnIcon.runAction(cc.sequence(cc.scaleTo(.1,2),cc.scaleTo(.1,.8),cc.scaleTo(.1,1))),this.rewardHexsNumLab.node.runAction(cc.sequence(cc.scaleTo(.1,2),cc.scaleTo(.1,.8),cc.scaleTo(.1,1))),this.rewardSkeleton.node.active=!0,this.rewardSkeleton.setAnimation(0,"huode_effect",!1)},t.prototype.addTool=function(e){switch(e){case s.ToolType.Bomb:this.bombTool.addTool();break;case s.ToolType.Hammer:this.hammerTool.addTool();break;case s.ToolType.Refresh:this.refreshTool.addTool()}},t.prototype.onAdBtn=function(){f.default.show(function(){this._refreshAdBtnState()}.bind(this))},t.prototype._refreshAdBtnState=function(){this.adBtn.active=a.default.instance.is4399Platform&&_.BenzPlatformManager.canShowAd()},__decorate([y],t.prototype,"hexsOffset",void 0),__decorate([y],t.prototype,"mapLength",void 0),__decorate([y(cc.Node)],t.prototype,"hexParent",void 0),__decorate([y(cc.Prefab)],t.prototype,"hexPrefab",void 0),__decorate([y(cc.Node)],t.prototype,"rorateArrow",void 0),__decorate([y(cc.Label)],t.prototype,"recordTip",void 0),__decorate([y(cc.Label)],t.prototype,"recordLabel",void 0),__decorate([y(cc.Label)],t.prototype,"scoreLabel",void 0),__decorate([y(i.default)],t.prototype,"hexGenerateCtrl",void 0),__decorate([y],t.prototype,"matchThreshold",void 0),__decorate([y(cc.EditBox)],t.prototype,"editBox",void 0),__decorate([y(cc.Toggle)],t.prototype,"rightTog",void 0),__decorate([y(cc.Toggle)],t.prototype,"rightBottomTog",void 0),__decorate([y(cc.Toggle)],t.prototype,"leftBottomTog",void 0),__decorate([y(sp.Skeleton)],t.prototype,"skeleton",void 0),__decorate([y(cc.Node)],t.prototype,"toolMask",void 0),__decorate([y(s.default)],t.prototype,"bombTool",void 0),__decorate([y(s.default)],t.prototype,"hammerTool",void 0),__decorate([y(s.default)],t.prototype,"refreshTool",void 0),__decorate([y(cc.Node)],t.prototype,"tipPanel",void 0),__decorate([y(cc.Label)],t.prototype,"tipContent",void 0),__decorate([y(cc.Node)],t.prototype,"tipBg",void 0),__decorate([y(cc.Label)],t.prototype,"gainScoreLabel",void 0),__decorate([y(cc.Node)],t.prototype,"rewardBtnIcon",void 0),__decorate([y(cc.Label)],t.prototype,"rewardHexsNumLab",void 0),__decorate([y(sp.Skeleton)],t.prototype,"rewardSkeleton",void 0),__decorate([y(cc.Node)],t.prototype,"rewardItemsParent",void 0),__decorate([y(cc.Node)],t.prototype,"adBtn",void 0),__decorate([y(cc.Label)],t.prototype,"adBtnLabel",void 0),__decorate([y],t.prototype,"speed",void 0),t=__decorate([m],t)}(cc.Component);n.default=v,cc._RF.pop()},{"./AdRewardTipPanelCtrl":"AdRewardTipPanelCtrl","./AudioManager":"AudioManager","./Collection/Queue":"Queue","./GameManager":"GameManager","./GameToolCtrl":"GameToolCtrl","./HexGenerateCtrl":"HexGenerateCtrl","./HexGenerateData":"HexGenerateData","./HexItem":"HexItem","./LanguageManager":"LanguageManager","./NetHex":"NetHex","./Platform/BenzPlatformManager":"BenzPlatformManager","./RewardHexsPanelCtrl":"RewardHexsPanelCtrl","./SynthesisAnimInfo":"SynthesisAnimInfo"}],GameToolCtrl:[function(e,t,n){"use strict";cc._RF.push(t,"dc8f9pz0thOJ4eUV8klbwEF","GameToolCtrl"),Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("./GameManager"),a=e("./AdsManager"),r=e("./Platform/BenzCommand"),s=e("./LanguageManager"),c=cc._decorator,l=c.ccclass,h=c.property;(function(e){e[e.None=0]="None",e[e.Bomb=1]="Bomb",e[e.Hammer=2]="Hammer",e[e.Refresh=3]="Refresh"})(o=n.ToolType||(n.ToolType={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.countLabel=null,t.lock=null,t.skeleton=null,t.canUseCount=2,t._useToolCallBack=null,t._tipCallBack=null,t._toolCount=0,t._usedCount=0,t._type=o.None,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.skeleton.setCompleteListener(function(){e.skeleton.node.active=!1})},t.prototype.init=function(e,t,n){this._type=e,this._useToolCallBack=t,this._tipCallBack=n,this._setToolCount(i.default.instance.getToolCount(this._type)),this._setToolUsedCount(i.default.instance.getToolUsedCount(this._type))},t.prototype.useTool=function(){this._setToolCount(this._toolCount-1),i.default.instance.setToolCount(this._type,this._toolCount),this._setToolUsedCount(this._usedCount+1),i.default.instance.setToolUsedCount(this._type,this._usedCount),i.default.instance.saveToolCountRecord()},t.prototype.clear=function(){this._usedCount=0,this.lock.active=!1,i.default.instance.setToolUsedCount(this._type,this._usedCount)},t.prototype._setToolCount=function(e){this._toolCount=e,this.countLabel.string="x"+this._toolCount},t.prototype._setToolUsedCount=function(e){this._usedCount=e,this.lock.active=this._usedCount>=this.canUseCount},t.prototype.onToolClick=function(){if(this._toolCount>0)this._type!=o.Refresh&&(this.node.zIndex=3),this._useToolCallBack&&this._useToolCallBack();else if(this._usedCount>=this.canUseCount){if(this._tipCallBack){var e=s.default.instance.getString("toolUseOut").replace("{0}",this.canUseCount.toString());this._tipCallBack(this.node.position,e)}}else{if(i.default.instance.is4399Platform)return;var t=this;a.AdsManager.getInstance().showRewardAd(r.BenzCommand.CMD_SHOW_REWARD_VIDEO_AD,{success:function(){t.addTool()},fail:function(){}})}},t.prototype.addTool=function(){this._setToolCount(this._toolCount+1),this.skeleton.node.active=!0,this.skeleton.setAnimation(0,"huode_effect",!1),i.default.instance.setToolCount(this._type,this._toolCount),i.default.instance.saveToolCountRecord()},__decorate([h(cc.Label)],t.prototype,"countLabel",void 0),__decorate([h(cc.Node)],t.prototype,"lock",void 0),__decorate([h(sp.Skeleton)],t.prototype,"skeleton",void 0),__decorate([h],t.prototype,"canUseCount",void 0),t=__decorate([l],t)}(cc.Component);n.default=u,cc._RF.pop()},{"./AdsManager":"AdsManager","./GameManager":"GameManager","./LanguageManager":"LanguageManager","./Platform/BenzCommand":"BenzCommand"}],GuideHexItem:[function(e,t,n){"use strict";cc._RF.push(t,"3008eP1RF1IM5DP9hu/lkyT","GuideHexItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./HexItem"),i=e("./HexItemData"),a=e("./GuidePanelCtrl"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.position=cc.Vec2.ZERO,t.guideNum=-2,t}return __extends(t,e),t.prototype.onLoad=function(){var t=new i.default;t.num=this.guideNum,e.prototype.init.call(this,this.position.x,this.position.y,0,t,null)},t.prototype._playCarryExplosionAnim=function(e,t){a.default.instance.showSynthesisAnim(e,t)},__decorate([c(cc.Vec2)],t.prototype,"position",void 0),__decorate([c],t.prototype,"guideNum",void 0),t=__decorate([s],t)}(o.default);n.default=l,cc._RF.pop()},{"./GuidePanelCtrl":"GuidePanelCtrl","./HexItem":"HexItem","./HexItemData":"HexItemData"}],GuidePanelCtrl:[function(e,t,n){"use strict";cc._RF.push(t,"2ed32+gxQ5MTLhf4iMtscMp","GuidePanelCtrl"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameManager"),i=e("./HexGenerateCtrl"),a=e("./AudioManager"),r=e("./GuideHexItem"),s=e("./SynthesisAnimInfo"),c=e("./Collection/Queue"),l=e("./HexGenerateData"),h=e("./RewardHexsPanelCtrl"),u=e("./LanguageManager"),d=cc._decorator,p=d.ccclass,_=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.step1Parent=null,t.step2Parent=null,t.step1Items=[],t.step2Items=[],t.hexGenerateCtrl=null,t.skeleton=null,t.rorateArrow=null,t.tipLabel=null,t.finger=null,t.matchThreshold=49,t.step1FingerStart=cc.Vec2.ZERO,t.step1FingerEnd=cc.Vec2.ZERO,t.step1FingerDuration=0,t.step2FingerDragStart=cc.Vec2.ZERO,t.step2FingerDragEnd=cc.Vec2.ZERO,t.step2FingerDragDuration=0,t.step2FingerTapStart=cc.Vec2.ZERO,t.step2FingerTapEnd=cc.Vec2.ZERO,t.step2FingerTapDuration=0,t._currentStep=0,t._hexItems=[[]],t._animing=!1,t._animQueue=new c.Queue,t._synthesisNodes=[],t._parentPostion=cc.Vec2.ZERO,t._isRorate=!1,t}var n;return __extends(t,e),n=t,Object.defineProperty(t,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),t.showGuide=function(e){this._instance?this._instance._showGuide(e):cc.loader.loadRes("prefabs/GuidePanel",cc.Prefab,function(t,i){var a=cc.instantiate(i);a.parent=o.default.instance.node,n._instance=a.getComponent(n),n._instance._showGuide(e)})},t.prototype.onLoad=function(){var e=this;this.hexGenerateCtrl.init(function(t){e._onMoveCheck(t)},function(t){e._onDrop(t)},function(t){e._setRorate(t)}),this.skeleton.node.active=!1,this.skeleton.setCompleteListener(function(){e.skeleton.node.active=!1}),this.rorateArrow.runAction(cc.repeatForever(cc.rotateBy(7,360)))},t.prototype._showGuide=function(e){this._currentStep=e,1==e?this._initStep1():this._initStep2()},t.prototype._initStep1=function(){this.step1Parent.active=!0,this.step2Parent.active=!1,this._hexItems.length=0,this.tipLabel.string=u.default.instance.getString("rule0"),this._parentPostion=this.step1Parent.position,this.hexGenerateCtrl.refreshHexs([4],0,-1,!1,!1);for(var e=0,t=this.step1Items;e<t.length;e++){var n=t[e].getComponent(r.default),o=n.position.x,i=n.position.y;this._checkCurrentItems(o,i),this._hexItems[o][i]=n}this._refreshFinger()},t.prototype._initStep2=function(){this.step1Parent.active=!1,this.step2Parent.active=!0,this._setRorate(!1),this._hexItems.length=0,this._parentPostion=this.step2Parent.position,this.hexGenerateCtrl.refreshHexs([5,4],1,-1,!1,!1);for(var e=0,t=this.step2Items;e<t.length;e++){var n=t[e].getComponent(r.default),o=n.position.x,i=n.position.y;this._checkCurrentItems(o,i),this._hexItems[o][i]=n}},t.prototype._checkCurrentItems=function(e,t){for(var n=this._hexItems.length,o=n;o<=e;o++)this._hexItems[o]=[];for(o=n=this._hexItems[e].length;o<t;o++)this._hexItems[e].push(null)},t.prototype._onMoveCheck=function(e){this.finger.activeInHierarchy&&(this.finger.active=!1),this._matchItems(e,!1)},t.prototype._onDrop=function(e){if(2!=this._currentStep||this._isRorate)this._matchItems(e,!0)?(a.default.instance.play(a.SoundName.HexPut),this.hexGenerateCtrl.refreshHexs([],0,-1,!1,!1)):this._refreshFinger();else{for(var t=0,n=this._hexItems;t<n.length;t++)for(var o=0,i=n[t];o<i.length;o++){var r=i[o];r&&r.isEmpty&&r.refreshState(-2)}this._refreshFinger()}},t.prototype._setRorate=function(e){this._isRorate=e;var t=e?"rorateGuideTip2":"rorateGuideTip1";this.tipLabel.string=u.default.instance.getString(t),this._refreshFinger()},t.prototype._refreshFinger=function(){this.finger.stopAllActions(),this.finger.active=!0;var e=this;1==this._currentStep?(this.finger.setPosition(this.step1FingerStart),this.finger.runAction(cc.repeatForever(cc.sequence(cc.moveTo(this.step1FingerDuration,this.step1FingerEnd),cc.callFunc(function(){e.finger.setPosition(e.step1FingerStart)}))))):this._isRorate?(this.finger.setPosition(this.step2FingerDragStart),this.finger.runAction(cc.repeatForever(cc.sequence(cc.moveTo(this.step2FingerDragDuration,this.step2FingerDragEnd),cc.callFunc(function(){e.finger.setPosition(e.step2FingerDragStart)}))))):(this.finger.setPosition(this.step2FingerTapStart),this.finger.runAction(cc.repeatForever(cc.sequence(cc.moveTo(this.step2FingerTapDuration,this.step2FingerTapEnd),cc.moveTo(this.step2FingerTapDuration,this.step2FingerTapStart)))))},t.prototype._matchItems=function(e,t){for(var n=[],o=0,i=this._hexItems;o<i.length;o++)for(var a=0,r=i[o];a<r.length;a++){var s=r[a];if(null!=s&&s.isEmpty){if(n.length<e.length)for(var c=0,l=e;c<l.length;c++){var h=l[c];if(this._isMatch(h,s)){s.setCacheNum(h.num,h.isCenter,h.isHide),n.push(s);break}}s.refreshState(-2)}}if(n.length>=e.length){if(t){for(var u=0,d=n;u<d.length;u++){(h=d[u]).useCacheNum()}this._checkSynthesis(n),this._animing||this._playSynthesisAnim()}else for(var p=0,_=n;p<_.length;p++){(h=_[p]).refreshState(-1)}return!0}return!1},t.prototype._isMatch=function(e,t){var n=t.node.position.add(this._parentPostion),o=this.hexGenerateCtrl.getItemPos(e);return n.sub(o).mag()<=this.matchThreshold},t.prototype._checkSynthesis=function(e){if(!(e.length<=0)){e.sort(function(e,t){return e.num==t.num?e.isCenter?1:-1:t.num-e.num});var t=e.pop();if(!t.isEmpty)if(t.num>=o.default.instance.explosionNum)this._animQueue.enqueue(this._explosion(t));else{this._synthesisNodes.length=0;var n=o.default.instance.getSynthesisAnimNode();this._synthesisNodes.push(t);var i=[n];if(n.init(t),i=i.concat(this._getSynthesisItem([n])),this._synthesisNodes.length>=3)if(t.num>0){for(var a=0,r=this._synthesisNodes;a<r.length;a++){(d=r[a])==t?d.carry():d.refreshState(-2,!1)}this._animQueue.enqueue(new s.default(i,s.SynthesisAnimType.Carry,0)),e.push(t)}else{for(var c=[],h=0,u=this._synthesisNodes;h<u.length;h++){var d;(d=u[h]).refreshState(-2,!1);var p=new l.default;p.init(o.default.instance.explosionNum,2),c.push(p)}o.default.instance.addRewardHexs(c),this._animQueue.enqueue(new s.default(i,s.SynthesisAnimType.Reward,0,c))}else for(var _=0,f=i;_<f.length;_++){var g=f[_];o.default.instance.recycleSynthesisAnimNode(g)}}this._checkSynthesis(e)}},t.prototype.asyncWait=function(e){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(n){return[2,new Promise(function(n,i){var a=o.default.instance.timeSinceStartup;t.scheduleOnce(function(){n(a<this._startTime)},e)})]})})},t.prototype._getSynthesisItem=function(e){if(e.length<=0)return[];for(var t=[],n=0,i=e;n<i.length;n++)for(var a=i[n],r=a.item,s=r.getNeighbor(),c=r.num,l=0,h=s;l<h.length;l++){var u=h[l],d=this._hexItems[u.x];if(void 0!==d){var p=d[u.y];if(p&&p.num==c&&this._synthesisNodes.indexOf(p)<0){var _=o.default.instance.getSynthesisAnimNode();_.init(p),a.addChild(_),this._synthesisNodes.push(p),t.push(_)}}}return t=t.concat(this._getSynthesisItem(t))},t.prototype._explosion=function(e){var t=o.default.instance.getSynthesisAnimNode();t.init(e),e.refreshState(-2,!1);for(var n=[],i=0,a=e.getNeighbor();i<a.length;i++){var r=a[i],c=this._hexItems[r.x];if(void 0!==c){var h=c[r.y];if(h&&!h.isEmpty){if(0==h.num){var u=new l.default;u.init(o.default.instance.explosionNum,2),n.push(u)}var d=o.default.instance.getSynthesisAnimNode();d.init(h),t.addChild(d),h.refreshState(-2,!1)}}}return o.default.instance.addRewardHexs(n),new s.default([t],s.SynthesisAnimType.Explosion,0,n)},t.prototype._playSynthesisAnim=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:if(this._animQueue.count<=0)return this._animing=!1,1==this._currentStep?this._showGuide(2):o.default.instance.showStartPanel(),[2];switch(this._animing=!0,e=this._animQueue.dequeue(),t=!1,e.type){case s.SynthesisAnimType.Explosion:return[3,1];case s.SynthesisAnimType.Carry:return[3,3];case s.SynthesisAnimType.Reward:return[3,5]}return[3,7];case 1:return this._playExplosion(e),[4,this.asyncWait(.2)];case 2:return(t=n.sent())?[2]:(e.rewards.length>0&&h.default.showRewards(e.rewards,!0),[3,7]);case 3:return e.playCarryAnim(),[4,this.asyncWait(o.default.instance.synthesisAnimTime+.6)];case 4:return t=n.sent(),e.recycle(),t?[2]:[3,7];case 5:return e.playCarryAnim(),[4,this.asyncWait(o.default.instance.synthesisAnimTime+.6)];case 6:return t=n.sent(),e.recycle(),t?[2]:(h.default.showRewards(e.rewards,!0),[3,7]);case 7:return this._playSynthesisAnim(),[2]}})})},t.prototype._playExplosion=function(e){var t=e.getFirstNode(),n=t.item;n.playExplosionEffect();for(var o=0,i=t.children;o<i.length;o++){i[o].item.playExplosionEffect()}e.recycle(),this.scheduleOnce(function(){this.skeleton.node.active=!0,this.skeleton.node.setPosition(n.node.position),this.skeleton.node.color=cc.Color.WHITE,this.skeleton.setAnimation(0,"bomb_effect",!1),n.refreshIcon();for(var e=0,o=t.children;e<o.length;e++){o[e].item.refreshIcon()}},.4)},t.prototype.showSynthesisAnim=function(e,t){this.skeleton.node.active=!0,this.skeleton.node.setPosition(e.add(this._parentPostion)),this.skeleton.node.color=t,this.skeleton.setAnimation(0,"baokai_effect",!1)},t.prototype.destroyGuidePanel=function(){this.node.destroy(),n._instance=null},t._instance=null,__decorate([_(cc.Node)],t.prototype,"step1Parent",void 0),__decorate([_(cc.Node)],t.prototype,"step2Parent",void 0),__decorate([_([cc.Node])],t.prototype,"step1Items",void 0),__decorate([_([cc.Node])],t.prototype,"step2Items",void 0),__decorate([_(i.default)],t.prototype,"hexGenerateCtrl",void 0),__decorate([_(sp.Skeleton)],t.prototype,"skeleton",void 0),__decorate([_(cc.Node)],t.prototype,"rorateArrow",void 0),__decorate([_(cc.Label)],t.prototype,"tipLabel",void 0),__decorate([_(cc.Node)],t.prototype,"finger",void 0),__decorate([_],t.prototype,"matchThreshold",void 0),__decorate([_(cc.Vec2)],t.prototype,"step1FingerStart",void 0),__decorate([_(cc.Vec2)],t.prototype,"step1FingerEnd",void 0),__decorate([_],t.prototype,"step1FingerDuration",void 0),__decorate([_(cc.Vec2)],t.prototype,"step2FingerDragStart",void 0),__decorate([_(cc.Vec2)],t.prototype,"step2FingerDragEnd",void 0),__decorate([_],t.prototype,"step2FingerDragDuration",void 0),__decorate([_(cc.Vec2)],t.prototype,"step2FingerTapStart",void 0),__decorate([_(cc.Vec2)],t.prototype,"step2FingerTapEnd",void 0),__decorate([_],t.prototype,"step2FingerTapDuration",void 0),t=n=__decorate([p],t)}(cc.Component);n.default=f,cc._RF.pop()},{"./AudioManager":"AudioManager","./Collection/Queue":"Queue","./GameManager":"GameManager","./GuideHexItem":"GuideHexItem","./HexGenerateCtrl":"HexGenerateCtrl","./HexGenerateData":"HexGenerateData","./LanguageManager":"LanguageManager","./RewardHexsPanelCtrl":"RewardHexsPanelCtrl","./SynthesisAnimInfo":"SynthesisAnimInfo"}],HexGenerateCtrl:[function(e,t,n){"use strict";cc._RF.push(t,"4a4fdWN+ihMNJB2WHD2GXf/","HexGenerateCtrl"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./HexGenerateItem"),i=e("./NetHex"),a=e("./GameManager"),r=e("./HexGenerateData"),s=e("./AudioManager"),c=cc._decorator,l=c.ccclass,h=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dragNode=null,t.parent=null,t.prefab=null,t._items=[],t._hideItems=[],t._moveCallBack=null,t._dropCallBack=null,t._rorateCallBack=null,t._isSetHight=!1,t._isRotating=!1,t._data=new r.default,t}return __extends(t,e),t.prototype.onLoad=function(){this.dragNode.on(cc.Node.EventType.TOUCH_START,this._onTouchStart,this),this.dragNode.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this),this.dragNode.on(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this),this.dragNode.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this)},t.prototype.onDestroy=function(){this.dragNode.off(cc.Node.EventType.TOUCH_START,this._onTouchStart,this),this.dragNode.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this),this.dragNode.off(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this),this.dragNode.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this)},t.prototype.init=function(e,t,n){void 0===n&&(n=null),this._moveCallBack=e,this._dropCallBack=t,this._rorateCallBack=n},t.prototype.refresh=function(e,t,n,o){void 0===n&&(n=[]),void 0===o&&(o=!1),this._data.init(e,t,n),this._refreshHexs(o)},t.prototype.refreshHexs=function(e,t,n,o,i){void 0===n&&(n=-1),void 0===o&&(o=!1),void 0===i&&(i=!0),this._data.refresh(e,t,n),this._refreshHexs(o,i)},t.prototype._refreshHexs=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!0),this.hideItems(),this.dragNode.setPosition(cc.Vec2.ZERO),this.dragNode.stopAllActions(),this.dragNode.rotation=0,this._isRotating=!1;var n=cc.Vec2.ZERO,o=i.default.getZero(),r=this._data.nums,s=r.length,c=this._data.hideIndex,l=r[0],h=this._getItem();if(h.refresh(l,0==c,o.toPixel(a.default.instance.hexSize,a.default.instance.hexYOffset),!1,e),a.default.instance.checkSpecialTip(h),s>1)for(var u=1;u<s;u++){var d=this._data.getDir(o.isOddLine);o.add(d);var p=o.toPixel(a.default.instance.hexSize,a.default.instance.hexYOffset);l=r[u];var _=r.indexOf(l)!=u&&r.lastIndexOf(l)==u;(h=this._getItem()).refresh(l,c==u,p,_,e),u==s-1&&(n=cc.v2(-p.x/2,-p.y/2)),a.default.instance.checkSpecialTip(h)}this.parent.setPosition(n),t&&a.default.instance.setGenerateHexRecord(this._data)},t.prototype.getItemPos=function(e){var t=e.node.position.add(this.parent.position);return this.dragNode.rotation>0&&t.negSelf(),t.addSelf(this.dragNode.position),t.addSelf(this.node.position),t},t.prototype._getItem=function(){var e=null;if(this._hideItems.length<=0){var t=cc.instantiate(this.prefab);t.parent=this.parent,e=t.getComponent(o.default)}else e=this._hideItems.pop();return e.node.active=!0,this._items.push(e),e},t.prototype.hideItems=function(){for(var e=0,t=this._items;e<t.length;e++){var n=t[e];n.node.active=!1,this._hideItems.push(n)}this._items.length=0},t.prototype._onClick=function(){if(!(this._isRotating||this._items.length<2)){this._isRotating=!0;var e=this,t=cc.sequence(cc.rotateBy(.3,180),cc.callFunc(function(){e._isRotating=!1,e.dragNode.rotation>=360&&(e.dragNode.rotation=0)}));this.dragNode.runAction(t);for(var n=0,o=this._items;n<o.length;n++){o[n].rorate(.3)}s.default.instance.play(s.SoundName.GenerateHexsRorate),this._rorateCallBack&&this._rorateCallBack(0==this.dragNode.rotation)}},t.prototype._onTouchStart=function(e){this._isSetHight=!1},t.prototype._onTouchMove=function(e){this._isRotating||(this._isSetHight||this._checkClick(e.touch)||(this._isSetHight=!0,this.dragNode.y=150),this.dragNode.setPosition(this.dragNode.position.addSelf(e.touch.getDelta())),null!=this._moveCallBack&&this._moveCallBack(this._items))},t.prototype._onTouchEnd=function(e){this._checkClick(e.touch)?this._onClick():null!=this._dropCallBack&&this._dropCallBack(this._items),this.dragNode.setPosition(cc.Vec2.ZERO)},t.prototype._onTouchCancel=function(e){this._checkClick(e.touch)?this._onClick():null!=this._dropCallBack&&this._dropCallBack(this._items),this.dragNode.setPosition(cc.Vec2.ZERO)},t.prototype._checkClick=function(e){return e.getLocation().sub(e.getStartLocation()).mag()<1},__decorate([h(cc.Node)],t.prototype,"dragNode",void 0),__decorate([h(cc.Node)],t.prototype,"parent",void 0),__decorate([h(cc.Prefab)],t.prototype,"prefab",void 0),t=__decorate([l],t)}(cc.Component);n.default=u,cc._RF.pop()},{"./AudioManager":"AudioManager","./GameManager":"GameManager","./HexGenerateData":"HexGenerateData","./HexGenerateItem":"HexGenerateItem","./NetHex":"NetHex"}],HexGenerateData:[function(e,t,n){"use strict";cc._RF.push(t,"11379ErEmFK05v1t4ipYzrC","HexGenerateData"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./NetHex"),i=e("./GameManager"),a=function(){function e(){this.nums=[],this.dir=0,this.hideIndex=-1}return e.prototype.init=function(e,t,n){void 0===n&&(n=[]),this.nums.length=0;var o=1;t>1&&(o=Math.floor(Math.random()*t+1));for(var a=0;a<o;a++){Math.random()<i.default.instance.zeroRate?this.nums.push(0):this.nums.push(Math.floor(Math.random()*e+1))}if(o>1){(n.length<=0||n.length>3)&&(n=[0,1,2]);var r=Math.floor(Math.random()*n.length);this.dir=n[r]}var s=Math.random()<i.default.instance.hideRate;this.hideIndex=s?Math.floor(Math.random()*o):-1},e.prototype.refresh=function(e,t,n){if(this.nums=e,"number"==typeof t)this.dir=t;else{(t.length<=0||t.length>3)&&(t=[0,1,2]);var o=Math.floor(Math.random()*t.length);this.dir=t[o]}this.hideIndex=n},e.prototype.getDir=function(e){return this.dir<1?o.default.getRight():this.dir<2?o.default.getRightBottom(e):o.default.getLeftBottom(e)},e}();n.default=a,cc._RF.pop()},{"./GameManager":"GameManager","./NetHex":"NetHex"}],HexGenerateItem:[function(e,t,n){"use strict";cc._RF.push(t,"0da5d+wjn9DLJVu4JrAgTo8","HexGenerateItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameManager"),i=cc._decorator,a=i.ccclass,r=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.blackTimeLab=null,t.centerObj=null,t.refreshEffect=null,t._isCenter=!1,t._isSetScaleAnim=!1,t._num=0,t._isHide=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"isCenter",{get:function(){return this._isCenter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"num",{get:function(){return this._num},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isHide",{get:function(){return this._isHide},enumerable:!0,configurable:!0}),t.prototype.refresh=function(e,t,n,i,a){void 0===i&&(i=!1),void 0===a&&(a=!1),this._num=e,this._isCenter=i,this._isHide=t,this.centerObj.active=i,!0!==i||this._isSetScaleAnim||(this._isSetScaleAnim=!0,this.centerObj.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.05),cc.scaleTo(.5,1))))),this.node.active=!0,this.node.position=n,this.node.rotation=0,t?(this.icon.spriteFrame=o.default.instance.getSpriteFrame("fk_suiji"),this.blackTimeLab.node.active=!1):(this.icon.spriteFrame=o.default.instance.getSpriteFrame("fk_"+e),0==e?(this.blackTimeLab.node.active=!0,this.blackTimeLab.string=o.default.instance.blackTime+"s"):this.blackTimeLab.node.active=!1),a&&this._playRefreshEffect()},t.prototype.rorate=function(e){this.node.stopAllActions();var t=cc.rotateBy(e,-180);this.node.runAction(t)},t.prototype._playRefreshEffect=function(){this.refreshEffect.active=!0,this.refreshEffect.opacity=0;var e=this;this.refreshEffect.runAction(cc.sequence(cc.fadeIn(.2),cc.fadeOut(.2),cc.callFunc(function(){e.refreshEffect.active=!1})))},__decorate([r(cc.Sprite)],t.prototype,"icon",void 0),__decorate([r(cc.Label)],t.prototype,"blackTimeLab",void 0),__decorate([r(cc.Node)],t.prototype,"centerObj",void 0),__decorate([r(cc.Node)],t.prototype,"refreshEffect",void 0),t=__decorate([a],t)}(cc.Component);n.default=s,cc._RF.pop()},{"./GameManager":"GameManager"}],HexItemData:[function(e,t,n){"use strict";cc._RF.push(t,"214c22STC1KVIeKZORMWYz6","HexItemData"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(){this.num=-2,this.lockStep=0,this.blackLeftTime=0}}();n.default=o,cc._RF.pop()},{}],HexItem:[function(e,t,n){"use strict";cc._RF.push(t,"854828wFD5Jzoq+dQAi6vZ5","HexItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./NetHex"),i=e("./GameManager"),a=e("./AudioManager"),r=e("./LanguageManager"),s=cc._decorator,c=s.ccclass,l=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bg=null,t.icon=null,t.synthesisAnimBg=null,t.connectRorateNode=null,t.traillingRorateNode=null,t.synthesisTrailing=null,t.synthesisConnectBg=null,t.explosionEffect=null,t.lockStepLabel=null,t.stepLabel=null,t.blackTimeLabel=null,t._hex=null,t._isCenter=!1,t._num=-2,t._cacheNum=-3,t._isHide=!1,t._animing=!1,t._clickFunc=null,t._lockStep=0,t._blackLeftTime=0,t._blackSchedule=null,t._index=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"hex",{get:function(){return this._hex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCenter",{get:function(){return this._isCenter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"num",{get:function(){return this._num},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lockStep",{get:function(){return this._lockStep},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blackLeftTime",{get:function(){return this._blackLeftTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this._num<0&&this._num>-3},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.stepLabel.string=r.default.instance.getString("step")},t.prototype.init=function(e,t,n,a,r){this._index=n,this._hex=new o.default(e,t),this.node.position=this._hex.toPixel(i.default.instance.hexSize,i.default.instance.hexYOffset),this._num=-998,this._lockStep=a.lockStep,this._blackLeftTime=a.blackLeftTime,this._isCenter=!1,this._clickFunc=r,this._blackSchedule=function(){this._blackLeftTime--,this._blackLeftTime<=0&&(this.blackTimeLabel.node.active=!1,this.refreshState(-3),i.default.instance.saveGameRecord(),this.unschedule(this._blackSchedule)),this.blackTimeLabel.string=this._blackLeftTime+"s"},this.refreshState(a.num,!0,!0)},t.prototype.refreshState=function(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!1),this._num!=e&&(this._num=e,this.unschedule(this._blackSchedule),this.lockStepLabel.node.active=!1,this.blackTimeLabel.node.active=!1,this._num<-2?(this.lockStepLabel.node.active=!0,n||(this._lockStep=i.default.instance.lockStep),this.lockStepLabel.string=this._lockStep.toString(),i.default.instance.registerLock(this)):0==this._num&&(this.blackTimeLabel.node.active=!0,n||(this._blackLeftTime=i.default.instance.blackTime),this.blackTimeLabel.string=this._blackLeftTime+"s",this.schedule(this._blackSchedule,1)),t&&this.refreshIcon())},t.prototype.refreshIcon=function(e){if(void 0===e&&(e=-998),e<=-998&&(e=this.num),e<-1){this.icon.node.active=!1;var t=e<-2?"fk_zhijin":"fk_bg";this.bg.spriteFrame=i.default.instance.getSpriteFrame(t)}else this.icon.node.active=!0,e<0?this._isHide?this.icon.spriteFrame=i.default.instance.getSpriteFrame("dy_suiji"):this.icon.spriteFrame=i.default.instance.getSpriteFrame("dy_"+this._cacheNum):this.icon.spriteFrame=i.default.instance.getSpriteFrame("fk_"+e)},t.prototype.setCacheNum=function(e,t,n){this._cacheNum=e,this._isCenter=t,this._isHide=n},t.prototype.useCacheNum=function(){this._cacheNum<=-3||(this.refreshState(this._cacheNum),this._cacheNum=-3)},t.prototype.getNeighbor=function(){return this._hex.getNeighbor()},t.prototype.carry=function(){this.refreshState(this._num+1,!1)},t.prototype.beginCarryAnim=function(e){this.node.scale=1,this._animing=!1;var t=i.default.instance.getItemColor(e.num);if(null!=e.parent){this.refreshIcon();var n=e.parent.item.hex,a=o.default.sub(n,this.hex),r=60*this.hex.getDirection(a)-180;this.traillingRorateNode.rotation=r,this.traillingRorateNode.position=cc.Vec2.ZERO,this.connectRorateNode.rotation=r,this.synthesisConnectBg.active=!0,this.synthesisConnectBg.color=t,this.synthesisTrailing.color=t}else 0==e.num?this.refreshIcon():this.refreshIcon(e.num+1),this.synthesisConnectBg.active=!1;e.children.length>0?(this.synthesisAnimBg.active=!0,this.synthesisAnimBg.scale=1,this.synthesisAnimBg.opacity=255,this.synthesisTrailing.active=!1,this.synthesisAnimBg.color=t):this.playCarryAnim(e)},t.prototype.playCarryAnim=function(e){if(!this._animing){this._animing=!0;var t=this;if(null!=e.parent){this.synthesisAnimBg.active=!1,this.synthesisTrailing.active=!0;var n=e.parent.item.node.position.sub(this.node.position),o=e.getTime();this.traillingRorateNode.runAction(cc.sequence(cc.moveTo(o,n),cc.callFunc(function(){t.synthesisTrailing.active=!1,e.parent.playCarryAnim()}))),this.scheduleOnce(function(){this.synthesisConnectBg.active=!1},o/2)}else{var r=0;0!=e.num&&(r=e.num+1);var s=i.default.instance.getItemColor(r);this.synthesisAnimBg.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,0),cc.fadeOut(.1)),cc.callFunc(function(){t.synthesisAnimBg.active=!1,t._playCarryExplosionAnim(t.node.position,s);var e=r>=i.default.instance.explosionNum-1?a.SoundName.Synthesis10:a.SoundName.SynthesisHex;a.default.instance.play(e),t.node.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.1,1)))})))}}},t.prototype._playCarryExplosionAnim=function(e,t){i.default.instance.showSynthesisAnim(e,t)},t.prototype.stopAnim=function(){this.unscheduleAllCallbacks(),this.node.stopAllActions()},t.prototype.onItemClick=function(){this._clickFunc&&this._clickFunc(this)},t.prototype.playExplosionEffect=function(){this.explosionEffect.active=!0,this.explosionEffect.opacity=0;var e=this;this.explosionEffect.runAction(cc.sequence(cc.fadeIn(.2),cc.fadeOut(.2),cc.callFunc(function(){e.explosionEffect.active=!1})))},t.prototype.reduceLockStep=function(){return this._lockStep--,this._lockStep<=0?(this.lockStepLabel.node.active=!1,this.refreshState(-2),!0):(this.lockStepLabel.string=this._lockStep.toString(),!1)},__decorate([l(cc.Sprite)],t.prototype,"bg",void 0),__decorate([l(cc.Sprite)],t.prototype,"icon",void 0),__decorate([l(cc.Node)],t.prototype,"synthesisAnimBg",void 0),__decorate([l(cc.Node)],t.prototype,"connectRorateNode",void 0),__decorate([l(cc.Node)],t.prototype,"traillingRorateNode",void 0),__decorate([l(cc.Node)],t.prototype,"synthesisTrailing",void 0),__decorate([l(cc.Node)],t.prototype,"synthesisConnectBg",void 0),__decorate([l(cc.Node)],t.prototype,"explosionEffect",void 0),__decorate([l(cc.Label)],t.prototype,"lockStepLabel",void 0),__decorate([l(cc.Label)],t.prototype,"stepLabel",void 0),__decorate([l(cc.Label)],t.prototype,"blackTimeLabel",void 0),t=__decorate([c],t)}(cc.Component);n.default=h,cc._RF.pop()},{"./AudioManager":"AudioManager","./GameManager":"GameManager","./LanguageManager":"LanguageManager","./NetHex":"NetHex"}],LanguageManager:[function(e,t,n){"use strict";cc._RF.push(t,"5faa7fLK3FJgLxz1HPQBrT/","LanguageManager"),Object.defineProperty(n,"__esModule",{value:!0});var o={gameName:{zh:"\u76f4\u523010",en:"Up To 10"},start:{zh:"\u5f00\u59cb\u6e38\u620f",en:"START"},highestScore:{zh:"\u6700\u9ad8\u5206\uff1a",en:"Best:"},pause:{zh:"\u6682\u505c",en:"Pause"},continue:{zh:"\u7ee7\u7eed\u6e38\u620f",en:"Continue"},returnHomepage:{zh:"\u8fd4\u56de\u4e3b\u9875",en:"Home"},restart:{zh:"\u91cd\u65b0\u5f00\u59cb",en:"Restart"},historyHighestScore:{zh:"\u5386\u53f2\u6700\u9ad8\uff1a",en:"Best Score:"},score:{zh:"\u5f97\u5206",en:"Score"},congratulations:{zh:"\u606d\u559c\u83b7\u5f97",en:"Congrats! You Got"},rewardTitle:{zh:"\u53ef\u9009\u6570\u5b57",en:"Optinal Number"},rewardNum:{zh:"\u6570\u91cf\uff1a",en:"Number:"},rewardEmpty:{zh:"\u8fd8\u672a\u83b7\u5f97\u53ef\u9009\u6570\u5b57",en:"No Optinal Number"},acquisitionMethod:{zh:"\u83b7\u53d6\u65b9\u6cd5\uff1a",en:"Source:"},acquisitionMethod1:{zh:"\u4e09\u4e2a\u76f8\u8fde\u9ed1\u82720\u6d88\u9664\u540e\uff0c\u53ef\u968f\u673a\u83b7\u5f97\u4e09\u7ec4\u53ef\u9009\u6570\u5b57",en:"3 sets of optional numbers can be obtained at random when the 3 connected black 0 are eliminated."},acquisitionMethod2:{zh:"\u4e09\u4e2a\u76f8\u8fde\u7684\u5f69\u827210\u53ef\u5408\u6210\u4e00\u679a\u70b8\u5f39\uff0c\u5e76\u5f15\u7206\u6d88\u9664\u76f8\u90bb\u6570\u5b57",en:"3 connected 10 can synthesize a bomb which will destroy numbers nearby."},rule0:{zh:"\u653e\u7f6e\u4e09\u4e2a\u76f8\u540c\u6570\u5b57\u53ef\u5408\u6210\u4e0b\u4e00\u9636\u6570\u5b57",en:"Put 3 identical numbers to synthesize a bigger number"},rule1:{zh:"\u5c06\u70b8\u5f39\u9053\u5177\u653e\u7f6e\u4efb\u610f\u7a7a\u683c\uff0c\u53ef\u6d88\u9664\u76f8\u90bb\u7684\u6570\u5b57",en:"The bomb can destroy numbers nearby"},rule2:{zh:"\u4f7f\u7528\u9524\u5b50\u9053\u5177\u53ef\u6572\u9664\u6307\u5b9a\u7684\u6570\u5b57",en:"Hammer can remove specified number"},rule3:{zh:"\u4f7f\u7528\u5237\u65b0\u9053\u5177\u53ef\u91cd\u7f6e\u6570\u5b57",en:"Refresh item can reset numbers"},rule4:{zh:"\u5c06\u95ee\u53f7\u653e\u5165\u7a7a\u683c\u4f1a\u53d8\u6210\u4e00\u4e2a\u968f\u673a\u6570\u5b57",en:"Question mark placed in space will become a random number."},rule5:{zh:"\u5982\u679c\u4e0d\u80fd\u5728\u9650\u5b9a\u65f6\u95f4\u5185\u6d88\u9664\u9ed1\u82720\uff0c\u8be5\u683c\u5b50\u5c06\u88ab\u9501\u5b9a\uff0c10\u6b65\u5185\u4e0d\u53ef\u64cd\u4f5c",en:"If the black 0 can't be eliminated within a limited time, the block will be locked and not operational within 10 steps."},toolUseOut:{zh:"\u6b21\u6570\u5df2\u8017\u5c3d\uff0c\u6bcf\u5c40\u4ec5\u53ef\u4f7f\u7528{0}\u6b21\u672c\u9053\u5177",en:"Times used up. {0} times is available"},step:{zh:"\u6b65",en:"Step"},zeroTip:{zh:"\u5982\u679c\u4e0d\u80fd\u5728\u9650\u5b9a\u65f6\u95f4\u5185\u6d88\u9664\u9ed1\u82720\uff0c\u8be5\u683c\u5b50\u5c06\u88ab\u9501\u5b9a\uff0c10\u6b65\u5185\u4e0d\u53ef\u64cd\u4f5c\uff0c\u6d88\u9664\u540e\u53ef\u83b7\u5f97\u5956\u52b1",en:"If the black 0 can't be eliminated within a limited time, the block will be locked and not operational within 10 steps. Rewards can be obtained after elimination."},rorateGuideTip1:{zh:"\u70b9\u51fb\u6b64\u5904\u4ee5\u65cb\u8f6c\u65b9\u5411",en:"Tap here to change direction"},rorateGuideTip2:{zh:"\u62d6\u52a8\u5e76\u653e\u7f6e\u5230\u7a7a\u683c\u4e2d\u4ee5\u5408\u6210\u66f4\u5927\u7684\u6570\u5b57",en:"Drag and put it in the space to get a bigger number."},getAdRewardTitle:{zh:"\u89c2\u770b\u5e7f\u544a\u83b7\u5f97\u9053\u5177\uff0c\u662f\u5426\u89c2\u770b\u5e7f\u544a\uff1f",en:"Get an item for watching a video. Sure to watch?"},getAdRewardTip:{zh:"\u770b\u5e7f\u544a\u83b7\u5f97",en:"Get by watching a video"},adBtnLabel:{zh:"\u770b\u5e7f\u544a",en:"Watch AD"}},i=function(){function e(){this._isChinese=!1}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e,this._instance._isChinese=cc.sys.language===cc.sys.LANGUAGE_CHINESE),this._instance},enumerable:!0,configurable:!0}),e.prototype.getString=function(e){var t=o[e];return null===t||void 0===t?"":this._isChinese?t.zh:t.en},e._instance=null,e}();n.default=i,cc._RF.pop()},{}],MyPageViewIndicatorItem:[function(e,t,n){"use strict";cc._RF.push(t,"8b751J7zzlGU5PJfQKKHOW7","MyPageViewIndicatorItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.activeNode=null,t.defaultNode=null,t}return __extends(t,e),t.prototype.refresh=function(e){this.activeNode.active=e,this.defaultNode.active=!e},__decorate([a(cc.Node)],t.prototype,"activeNode",void 0),__decorate([a(cc.Node)],t.prototype,"defaultNode",void 0),t=__decorate([i],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],MyPageViewIndicator:[function(e,t,n){"use strict";cc._RF.push(t,"138a17tS+ZDx7yLAqIug1pM","MyPageViewIndicator"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./MyPageViewIndicatorItem"),i=cc._decorator,a=i.ccclass,r=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.indicatorParent=null,t.indicatorItem=null,t._indicatorItems=[],t._totalPage=0,t}return __extends(t,e),t.prototype.init=function(e,t){this._totalPage=e;for(var n=0;n<e;n++){var i=void 0;if(this._indicatorItems.length>n)(i=this._indicatorItems[n]).node.setSiblingIndex(n);else{var a=cc.instantiate(this.indicatorItem);a.parent=this.indicatorParent.node,i=a.getComponent(o.default),this._indicatorItems.push(i)}i.node.active=!0}for(;n<this._indicatorItems.length;n++)this._indicatorItems[n].node.active=!1;this.indicatorParent.updateLayout()},t.prototype.refresh=function(e){for(var t=0;t<this._totalPage;t++)this._indicatorItems[t].refresh(t==e)},__decorate([r(cc.Layout)],t.prototype,"indicatorParent",void 0),__decorate([r(cc.Node)],t.prototype,"indicatorItem",void 0),t=__decorate([a],t)}(cc.Component);n.default=s,cc._RF.pop()},{"./MyPageViewIndicatorItem":"MyPageViewIndicatorItem"}],MyPageView:[function(e,t,n){"use strict";cc._RF.push(t,"479f0m91gZPabtiw/Bdo/I7","MyPageView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./MyPageViewIndicator"),i=cc._decorator,a=i.ccclass,r=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t.page=null,t.spaceingX=720,t.scrollThreshold=20,t.strength=10,t.elastic=!0,t.cancelInnerEvents=!0,t.myPageViewIndicator=null,t.myPageViewIndicatorLabel=null,t.leftBtn=null,t.rightBtn=null,t._page2=null,t._totalPage=0,t._currentPage=0,t._touchMoved=!1,t._isMainPage=!0,t._autoScrolling=!1,t._moveTargetX=0,t._refreshDel=null,t._contentOriginPos=null,t._leftContentBound=0,t._rightContentBound=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"currentPageIndex",{get:function(){return this._currentPage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentPageNode",{get:function(){return this._isMainPage?this.page:this._page2},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this._contentOriginPos=this.content.position,this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchStart,this,!0),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this,!0),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this,!0),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this,!0),this.leftBtn&&this.leftBtn.on("click",this.onLeft,this),this.rightBtn&&this.rightBtn.on("click",this.onRight,this)},t.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchStart,this,!0),this.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this,!0),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this,!0),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this,!0)},t.prototype.init=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=null),this._totalPage=e,this._refreshDel=n,null==this._contentOriginPos&&(this._contentOriginPos=this.content.position),this.myPageViewIndicator&&this.myPageViewIndicator.init(e,t),this.setCurrentPage(t)},t.prototype.scrollToLeft=function(){0!=this._currentPage&&(this.content.x=this._contentOriginPos.x-this.currentPageNode.x,this.content.x++,this._refresh(1),this._currentPage--,this._isMainPage=!this._isMainPage,this._scrollToCurrentPage(),this.myPageViewIndicator&&this.myPageViewIndicator.refresh(this._currentPage))},t.prototype.scrollToRight=function(){this._currentPage!=this._totalPage-1&&(this.content.x=this._contentOriginPos.x-this.currentPageNode.x,this.content.x--,this._refresh(-1),this._currentPage++,this._isMainPage=!this._isMainPage,this._scrollToCurrentPage(),this.myPageViewIndicator&&this.myPageViewIndicator.refresh(this._currentPage))},t.prototype.setCurrentPage=function(e){this._autoScrolling=!1,this._currentPage=e,this._isMainPage=!0,this.content.position=this._contentOriginPos,this._leftContentBound=this._contentOriginPos.x-this._currentPage*this.spaceingX,this._rightContentBound=this._contentOriginPos.x+(this._totalPage-this._currentPage-1)*this.spaceingX,this.page.position=cc.v2(0,0),this.page.active=!0,this._page2&&(this._page2.active=!1,this._page2.position=cc.v2(0,0)),this._totalPage>1&&!this._page2&&(this._page2=cc.instantiate(this.page),this._page2.parent=this.content,this._page2.position=cc.v2(0,0),this._page2.active=!1),this._refreshPage(this.page,e),this.myPageViewIndicator&&this.myPageViewIndicator.refresh(this._currentPage)},t.prototype._refreshPage=function(e,t){null!=this._refreshDel&&this._refreshDel(e,t)},t.prototype._onTouchStart=function(e){this.enabledInHierarchy&&(this.content.x=this._contentOriginPos.x-this.currentPageNode.x,this._touchMoved=!1,this._autoScrolling=!1,this._stopPropagationIfTargetIsMe(e))},t.prototype._onTouchMove=function(e){if(this.enabledInHierarchy){var t=e.touch;if(this.content&&this._handleMoveLogic(t),this.cancelInnerEvents){if(t.getLocation().sub(t.getStartLocation()).mag()>7&&!this._touchMoved&&e.target!==this.node){var n=e.getTouches();if(n.length>0){var o=new cc.Event.EventTouch(n,e.bubbles);o.type=cc.Node.EventType.TOUCH_CANCEL,o.touch=e.touch,o.simulate=!0,e.target.dispatchEvent(o)}this._touchMoved=!0}this._stopPropagationIfTargetIsMe(e)}}},t.prototype._onTouchEnd=function(e){this.enabledInHierarchy&&(this._handleReleaseLogic(e.touch),this._touchMoved?e.stopPropagation():this._stopPropagationIfTargetIsMe(e))},t.prototype._onTouchCancel=function(e){this.enabledInHierarchy&&(e.simulate||this._handleReleaseLogic(e.touch),this._stopPropagationIfTargetIsMe(e))},t.prototype._stopPropagationIfTargetIsMe=function(e){e.eventPhase===cc.Event.AT_TARGET&&e.target===this.node&&e.stopPropagation()},t.prototype._handleMoveLogic=function(e){var t=e.getDelta();this.content.x+=t.x,this.elastic||(this.content.x<-this._rightContentBound?this.content.x=-this._rightContentBound:this.content.x>-this._leftContentBound&&(this.content.x=-this._leftContentBound));var n=e.getLocation().sub(e.getStartLocation());this._refresh(n.x)},t.prototype._refresh=function(e){var t=this.currentPageNode;if(null!=t){var n=this.content.x+t.x;if(0!=e&&n!=this._contentOriginPos.x)if(e>0){if(0==this._currentPage)return;n>this._contentOriginPos.x&&this._refreshOtherPage(!0)}else{if(this._currentPage==this._totalPage-1)return;n<this._contentOriginPos.x&&this._refreshOtherPage(!1)}}},t.prototype._refreshOtherPage=function(e){var t,n=e?this._currentPage-1:this._currentPage+1;if(e)if(this._isMainPage){if(this._page2.active=!0,this._page2.x<this.page.x)return;this._page2.x=this.page.x-this.spaceingX,t=this._page2}else{if(this.page.active=!0,this.page.x<this._page2.x)return;this.page.x=this._page2.x-this.spaceingX,t=this.page}else if(this._isMainPage){if(this._page2.active=!0,this._page2.x>this.page.x)return;this._page2.x=this.page.x+this.spaceingX,t=this._page2}else{if(this.page.active=!0,this.page.x>this._page2.x)return;this.page.x=this._page2.x+this.spaceingX,t=this.page}this._refreshPage(t,n)},t.prototype._handleReleaseLogic=function(e){var t=e.getStartLocation().sub(e.getLocation());if(Math.abs(t.x)>=this.scrollThreshold){var n=t.x;if(0===n)return;if(n>0){if(this._currentPage==this._totalPage-1)return void this._cancelScroll();this._currentPage++}else{if(0==this._currentPage)return void this._cancelScroll();this._currentPage--}this._isMainPage=!this._isMainPage,this._scrollToCurrentPage(),this.myPageViewIndicator&&this.myPageViewIndicator.refresh(this._currentPage)}else this._cancelScroll()},t.prototype._cancelScroll=function(){this._scrollToCurrentPage()},t.prototype._scrollToCurrentPage=function(){this._moveTargetX=this._contentOriginPos.x-this.currentPageNode.x,this._autoScrolling=!0},t.prototype.update=function(e){this._autoScrolling&&this._processAutoScrolling(e)},t.prototype._processAutoScrolling=function(e){var t=this.content.x,n=this._springLerp(t,this._moveTargetX,this.strength,e);Math.abs(n-t)<.01&&(n=this._moveTargetX,this._autoScrolling=!1,this.page.active=this._isMainPage,this._page2.active=!this._isMainPage),this.content.x=n},t.prototype._springLerp=function(e,t,n,o){o>1&&(o=1);var i=Math.round(1e3*o);o=.001*n;for(var a=0,r=0;r<i;r++)a=this._lerp(a,1,o);return this._lerp(e,t,a)},t.prototype._lerp=function(e,t,n){return e+(t-e)*n},t.prototype.onLeft=function(){console.log("onLeft"),this.scrollToLeft()},t.prototype.onRight=function(){console.log("onRight"),this.scrollToRight()},__decorate([r(cc.Node)],t.prototype,"content",void 0),__decorate([r(cc.Node)],t.prototype,"page",void 0),__decorate([r],t.prototype,"spaceingX",void 0),__decorate([r],t.prototype,"scrollThreshold",void 0),__decorate([r],t.prototype,"strength",void 0),__decorate([r],t.prototype,"elastic",void 0),__decorate([r],t.prototype,"cancelInnerEvents",void 0),__decorate([r(o.default)],t.prototype,"myPageViewIndicator",void 0),__decorate([r(cc.Label)],t.prototype,"myPageViewIndicatorLabel",void 0),__decorate([r(cc.Node)],t.prototype,"leftBtn",void 0),__decorate([r(cc.Node)],t.prototype,"rightBtn",void 0),t=__decorate([a],t)}(cc.Component);n.default=s,cc._RF.pop()},{"./MyPageViewIndicator":"MyPageViewIndicator"}],NetHex:[function(e,t,n){"use strict";cc._RF.push(t,"725d5cOyhxGNpp4ZnkxIyA/","NetHex"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){this._x=0,this._y=0,this._x=e,this._y=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOddLine",{get:function(){return this._x%2>0},enumerable:!0,configurable:!0}),e.getZero=function(){return new e(0,0)},e.getLeftTop=function(t){return new e(t?-1:0,-1)},e.prototype.toLeftTop=function(){this._y%2>0&&this._x--,this._y--},e.getRightTop=function(t){return new e(t?0:1,-1)},e.prototype.toRightTop=function(){this._y%2==0&&this._x++,this._y--},e.getLeft=function(){return new e(-1,0)},e.prototype.toLeft=function(){this._x--},e.getRight=function(){return new e(1,0)},e.prototype.toRight=function(){this._x++},e.getLeftBottom=function(t){return new e(t?-1:0,1)},e.prototype.toLeftBottom=function(){this._y%2>0&&this._x--,this._y++},e.getRightBottom=function(t){return new e(t?0:1,1)},e.prototype.toRightBottom=function(){this._y%2==0&&this._x++,this._y++},e.prototype.getDirection=function(e){return e.y<0?e.x<0?0:0==e.x&&this.y%2==0?0:1:0==e.y?e.x>0?2:5:e.x>0?3:0==e.x&&this.y%2>0?3:4},e.getDirections=function(t){var n=t%2>0;return[e.getLeftTop(n),e.getRightTop(n),e.getRight(),e.getRightBottom(n),e.getLeftBottom(n),e.getLeft()]},e.add=function(t,n){return new e(t.x+n.x,t.y+n.y)},e.prototype.add=function(e){this._x+=e.x,this._y+=e.y},e.sub=function(t,n){return new e(t.x-n.x,t.y-n.y)},e.prototype.sub=function(e){this._x-=e.x,this._y-=e.y},e.mul=function(t,n){return new e(t.x*n.x,t.y*n.y)},e.prototype.mul=function(e){"number"==typeof e?(this._x*=e,this._y*=e):(this._x*=e.x,this._y*=e.y)},e.div=function(t,n){return new e(t.x/n.x,t.y/n.y)},e.prototype.div=function(e){this._x/=e.x,this._y/=e.y},e.equals=function(e,t){return e.x===t.x&&e.y===t.y},e.prototype.equals=function(e){return this.x===e.x&&this.y===e.y},e.prototype.getNeighbor=function(){for(var t=e.getDirections(this.y),n=0,o=t;n<o.length;n++){o[n].add(this)}return t},e.prototype.toPixel=function(t,n){return void 0===n&&(n=0),e.toPixel(this.x,this.y,t,n)},e.toPixel=function(e,t,n,o){void 0===o&&(o=0);var i=.86602540378444*n;return e=e*i<<1,t%2>0&&(e-=i),cc.v2(e,-t*((n>>1)+i+o))},e}();n.default=o,cc._RF.pop()},{}],OverPanelCtrl:[function(e,t,n){"use strict";cc._RF.push(t,"586edGaJsNDdpfT91Nvqmzq","OverPanelCtrl"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameManager"),i=e("./AdsManager"),a=e("./AudioManager"),r=e("./LanguageManager"),s=cc._decorator,c=s.ccclass,l=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.recordTip=null,t.recordLabel=null,t.score=null,t.scoreNum=null,t.returnLabel=null,t.restartLabel=null,t.effect=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.score.string=r.default.instance.getString("score"),this.returnLabel.string=r.default.instance.getString("returnHomepage"),this.restartLabel.string=r.default.instance.getString("restart"),this.recordTip.string=r.default.instance.getString("historyHighestScore")},t.prototype.onEnable=function(){this.effect.resetSystem()},t.prototype.init=function(e){this.recordLabel.string=o.default.instance.getHighestScore().toString(),this.scoreNum.string=e.toString(),o.default.instance.restartGame(),a.default.instance.play(a.SoundName.GameOver)},t.prototype.onRestart=function(){this._hide(),i.AdsManager.getInstance().showInterstitialAd()},t.prototype.onReturn=function(){o.default.instance.setShowAd(!0),o.default.instance.showStartPanel()},t.prototype._hide=function(){this.node.active=!1},__decorate([l(cc.Label)],t.prototype,"recordTip",void 0),__decorate([l(cc.Label)],t.prototype,"recordLabel",void 0),__decorate([l(cc.Label)],t.prototype,"score",void 0),__decorate([l(cc.Label)],t.prototype,"scoreNum",void 0),__decorate([l(cc.Label)],t.prototype,"returnLabel",void 0),__decorate([l(cc.Label)],t.prototype,"restartLabel",void 0),__decorate([l(cc.ParticleSystem)],t.prototype,"effect",void 0),t=__decorate([c],t)}(cc.Component);n.default=h,cc._RF.pop()},{"./AdsManager":"AdsManager","./AudioManager":"AudioManager","./GameManager":"GameManager","./LanguageManager":"LanguageManager"}],PausePanelCtrl:[function(e,t,n){"use strict";cc._RF.push(t,"5bc51m0OV1JmrgaBBhM9MEo","PausePanelCtrl"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameManager"),i=e("./AdsManager"),a=e("./AudioManager"),r=e("./LanguageManager"),s=cc._decorator,c=s.ccclass,l=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t.continueLabel=null,t.returnLabel=null,t.restartLabel=null,t.soundIcon=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.title.string=r.default.instance.getString("pause"),this.continueLabel.string=r.default.instance.getString("continue"),this.returnLabel.string=r.default.instance.getString("returnHomepage"),this.restartLabel.string=r.default.instance.getString("restart"),this._refreshSoundIcon()},t.prototype.onContinue=function(){this._hide()},t.prototype.onRestart=function(){this._hide(),o.default.instance.restartGame(),i.AdsManager.getInstance().showInterstitialAd()},t.prototype.onReturn=function(){o.default.instance.showStartPanel()},t.prototype.onHelp=function(){o.default.instance.showRulePanel()},t.prototype.onSound=function(){a.default.instance.switchSound(),this._refreshSoundIcon()},t.prototype._refreshSoundIcon=function(){var e=a.default.instance.isMute?"shengyin_guan":"shengyin";this.soundIcon.spriteFrame=o.default.instance.getSpriteFrame(e)},t.prototype._hide=function(){this.node.active=!1},__decorate([l(cc.Label)],t.prototype,"title",void 0),__decorate([l(cc.Label)],t.prototype,"continueLabel",void 0),__decorate([l(cc.Label)],t.prototype,"returnLabel",void 0),__decorate([l(cc.Label)],t.prototype,"restartLabel",void 0),__decorate([l(cc.Sprite)],t.prototype,"soundIcon",void 0),t=__decorate([c],t)}(cc.Component);n.default=h,cc._RF.pop()},{"./AdsManager":"AdsManager","./AudioManager":"AudioManager","./GameManager":"GameManager","./LanguageManager":"LanguageManager"}],Queue:[function(e,t,n){"use strict";cc._RF.push(t,"8c713xGUqJAnb5smQLeNiXo","Queue"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e){this._queue=e||[]}return e.prototype.enqueue=function(e){this._queue.push(e)},e.prototype.dequeue=function(){return this._queue.shift()},e.prototype.clear=function(){this._queue.length=0},Object.defineProperty(e.prototype,"count",{get:function(){return this._queue.length},enumerable:!0,configurable:!0}),e}();n.Queue=o,cc._RF.pop()},{}],RewardHexItem:[function(e,t,n){"use strict";cc._RF.push(t,"cb620/XBAtPga9ic7vlOskT","RewardHexItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameManager"),i=cc._decorator,a=i.ccclass,r=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.blackTimeLab=null,t._num=0,t}return __extends(t,e),t.prototype.init=function(e,t){this.node.active=!0,this._num=t,this.blackTimeLab.node.active=!1,e?this.icon.spriteFrame=o.default.instance.getSpriteFrame("fk_suiji"):t>=0?(this.icon.spriteFrame=o.default.instance.getSpriteFrame("fk_"+t),0==t&&(this.blackTimeLab.node.active=!0,this.blackTimeLab.string=o.default.instance.blackTime+"s")):this.icon.spriteFrame=o.default.instance.getSpriteFrame("fk_bg_tm")},t.prototype.hideEmpty=function(){this._num<0&&(this.node.active=!1)},__decorate([r(cc.Sprite)],t.prototype,"icon",void 0),__decorate([r(cc.Label)],t.prototype,"blackTimeLab",void 0),t=__decorate([a],t)}(cc.Component);n.default=s,cc._RF.pop()},{"./GameManager":"GameManager"}],RewardHexsItem:[function(e,t,n){"use strict";cc._RF.push(t,"5ca00rhDERDV6H0ypdTquQ/","RewardHexsItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameManager"),i=e("./RewardHexsPanelCtrl"),a=e("./RewardHexItem"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parent=null,t.items=[],t.skeleton=null,t._data=null,t._isGet=!1,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.skeleton.setCompleteListener(function(){e.skeleton.node.active=!1}),this.skeleton.node.active=!1},t.prototype.init=function(e,t){this.unscheduleAllCallbacks(),this._data=e,this._isGet=t;var n=e.nums;n.length>1&&2==e.dir?(this.items[0].init(!1,-2),this.items[1].init(0==e.hideIndex,n[0]),this.items[2].init(1==e.hideIndex,n[1])):(this.items[0].init(0==e.hideIndex,n[0]),n.length>1?0==e.dir?(this.items[1].init(1==e.hideIndex,n[1]),this.items[2].init(!1,-2)):(this.items[1].init(!1,-2),this.items[2].init(1==e.hideIndex,n[1])):(this.items[1].init(!1,-2),this.items[2].init(!1,-2))),this.skeleton.node.active=!1,this.parent.active=!t},t.prototype.playGetAnim=function(e){e>0?this.scheduleOnce(function(){this._playGetAnim()},.5*e):this._playGetAnim()},t.prototype._playGetAnim=function(){this.skeleton.node.active=!0,this.skeleton.setAnimation(0,"chuxian_effect",!1),this.parent.active=!1,this.scheduleOnce(function(){this.parent.active=!0},.2)},t.prototype.onItem=function(){this._isGet||(o.default.instance.useRewardHex(this._data),i.default.Hide())},t.prototype.moveState=function(){for(var e=0,t=this.items;e<t.length;e++){t[e].hideEmpty()}this.parent.active=!0,this.skeleton.node.active=!1,this.unscheduleAllCallbacks()},__decorate([c(cc.Node)],t.prototype,"parent",void 0),__decorate([c([a.default])],t.prototype,"items",void 0),__decorate([c(sp.Skeleton)],t.prototype,"skeleton",void 0),t=__decorate([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{"./GameManager":"GameManager","./RewardHexItem":"RewardHexItem","./RewardHexsPanelCtrl":"RewardHexsPanelCtrl"}],RewardHexsPanelCtrl:[function(e,t,n){"use strict";cc._RF.push(t,"a9cae3awh5BCJEynengcHKC","RewardHexsPanelCtrl"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameManager"),i=e("./RewardHexsItem"),a=e("./LanguageManager"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t.space=cc.Vec2.ZERO,t.title=null,t.titleBg=null,t.prefab=null,t.itemParent=null,t.particleSystem=null,t.helpBtn=null,t.ownNumLabel=null,t.emptyLabel=null,t.getMethodNode=null,t.mask=null,t.getMethodLabel=null,t.getMethod1=null,t.getMethod2=null,t.blackTimeLabs=[],t._items=[],t._currentItems=[],t._isGet=!1,t}var n;return __extends(t,e),n=t,t.showRewards=function(e,t){this._instance?(this._instance.node.active=!0,this._instance.unscheduleAllCallbacks(),t?this._instance._showGetAnim(e):this._instance._showItems(e)):cc.loader.loadRes("prefabs/RewardHexsPanel",cc.Prefab,function(i,a){var r=cc.instantiate(a);r.parent=o.default.instance.node,n._instance=r.getComponent(n),t?n._instance._showGetAnim(e):n._instance._showItems(e)})},t.Hide=function(){this._instance&&this._instance._end()},t.prototype.onLoad=function(){for(var e=o.default.instance.blackTime+"s",t=0,n=this.blackTimeLabs;t<n.length;t++){n[t].string=e}this.emptyLabel.string=a.default.instance.getString("rewardEmpty"),this.getMethodLabel.string=a.default.instance.getString("acquisitionMethod"),this.getMethod1.string=a.default.instance.getString("acquisitionMethod1"),this.getMethod2.string=a.default.instance.getString("acquisitionMethod2")},t.prototype._showGetAnim=function(e){this._init(e,!0),this.titleBg.y=cc.winSize.height/2+100,this.particleSystem.node.active=!1,this.itemParent.active=!1;var t=this,n=e.length;this.titleBg.stopAllActions(),this.titleBg.runAction(cc.sequence(cc.moveTo(.3,cc.v2(0,441.6)).easing(cc.easeBackInOut()),cc.callFunc(function(){t._playItemsGetAnim(n)})))},t.prototype._showItems=function(e){this._init(e,!1),this.particleSystem.node.active=!1,this.itemParent.active=!0},t.prototype._init=function(e,t){this._isGet=t;var n=0;for(this._currentItems.length=0;n<e.length;n++){var o=null;n>=this._items.length?(o=cc.instantiate(this.prefab).getComponent(i.default),this._items.push(o)):(o=this._items[n]).node.scale=1,o.node.parent=this.itemParent,o.node.active=!0;var r=Math.floor(n/3),s=n%3;o.node.x=s*this.space.x,o.node.y=-r*this.space.y,o.init(e[n],t),this._currentItems.push(o)}var c=0;n>0&&(c=(Math.floor((n-1)/3)+1)*this.space.y);for(this.content.height=c;n<this._items.length;n++)this._items[n].node.active=!1;t?(this.title.string=a.default.instance.getString("congratulations"),this.title.node.x=0,this.helpBtn.active=!1,this.ownNumLabel.node.active=!1,this.emptyLabel.node.active=!1,this.getMethodNode.active=!1):(this.ownNumLabel.node.active=!0,this.ownNumLabel.string=a.default.instance.getString("rewardNum")+e.length,this.title.string=a.default.instance.getString("rewardTitle"),e.length>0?(this.title.node.x=-13.5,this.helpBtn.active=!0,this.mask.active=!0,this.getMethodNode.active=!1,this.emptyLabel.node.active=!1):(this.title.node.x=0,this.helpBtn.active=!1,this.mask.active=!1,this.getMethodNode.active=!0,this.emptyLabel.node.active=!0))},t.prototype._playItemsGetAnim=function(e){this.particleSystem.node.active=!0,this.particleSystem.resetSystem(),this.itemParent.active=!0;for(var t=0;t<e;t++)this._items[t].playGetAnim(t)},t.prototype.onHelp=function(){this.mask.active=!0,this.getMethodNode.active=!0},t.prototype.end=function(){this.mask.activeInHierarchy?this.getMethodNode.active=!1:this._end()},t.prototype._end=function(){this.node.active=!1,this._isGet&&o.default.instance.showRewards(this._currentItems)},t._instance=null,__decorate([c(cc.Node)],t.prototype,"content",void 0),__decorate([c(cc.Vec2)],t.prototype,"space",void 0),__decorate([c(cc.Label)],t.prototype,"title",void 0),__decorate([c(cc.Node)],t.prototype,"titleBg",void 0),__decorate([c(cc.Node)],t.prototype,"prefab",void 0),__decorate([c(cc.Node)],t.prototype,"itemParent",void 0),__decorate([c(cc.ParticleSystem)],t.prototype,"particleSystem",void 0),__decorate([c(cc.Node)],t.prototype,"helpBtn",void 0),__decorate([c(cc.Label)],t.prototype,"ownNumLabel",void 0),__decorate([c(cc.Label)],t.prototype,"emptyLabel",void 0),__decorate([c(cc.Node)],t.prototype,"getMethodNode",void 0),__decorate([c(cc.Node)],t.prototype,"mask",void 0),__decorate([c(cc.Label)],t.prototype,"getMethodLabel",void 0),__decorate([c(cc.Label)],t.prototype,"getMethod1",void 0),__decorate([c(cc.Label)],t.prototype,"getMethod2",void 0),__decorate([c([cc.Label])],t.prototype,"blackTimeLabs",void 0),t=n=__decorate([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{"./GameManager":"GameManager","./LanguageManager":"LanguageManager","./RewardHexsItem":"RewardHexsItem"}],RulePageCtrl:[function(e,t,n){"use strict";cc._RF.push(t,"2756bQt2M5OQ51NaWEogYNK","RulePageCtrl"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pageNodes=[],t}return __extends(t,e),t.prototype.refresh=function(e){for(var t=0;t<this.pageNodes.length;t++)this.pageNodes[t].active=t==e},__decorate([a([cc.Node])],t.prototype,"pageNodes",void 0),t=__decorate([i],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],RulePanelCtrl:[function(e,t,n){"use strict";cc._RF.push(t,"6632dcjZ/dFVqptord7ayQL","RulePanelCtrl"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./MyPageView"),i=e("./RulePageCtrl"),a=e("./GameManager"),r=e("./LanguageManager"),s=cc._decorator,c=s.ccclass,l=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.myPageView=null,t.rules=[],t.blackZeroRule1=null,t.blackZeroRule2=null,t}return __extends(t,e),t.prototype.onLoad=function(){for(var e=0;e<this.rules.length;e++)this.rules[e].string=r.default.instance.getString("rule"+e);this.blackZeroRule1.string=r.default.instance.getString("acquisitionMethod1"),this.blackZeroRule2.string=r.default.instance.getString("acquisitionMethod2"),this.myPageView.init(6,0,this._refreshPage)},t.prototype.refresh=function(e){void 0===e&&(e=0),this.myPageView.setCurrentPage(e)},t.prototype.onClose=function(){a.default.instance.hideRulePanel()},t.prototype._refreshPage=function(e,t){e.getComponent(i.default).refresh(t)},__decorate([l(o.default)],t.prototype,"myPageView",void 0),__decorate([l([cc.Label])],t.prototype,"rules",void 0),__decorate([l(cc.Label)],t.prototype,"blackZeroRule1",void 0),__decorate([l(cc.Label)],t.prototype,"blackZeroRule2",void 0),t=__decorate([c],t)}(cc.Component);n.default=h,cc._RF.pop()},{"./GameManager":"GameManager","./LanguageManager":"LanguageManager","./MyPageView":"MyPageView","./RulePageCtrl":"RulePageCtrl"}],StartPanelCtrl:[function(e,t,n){"use strict";cc._RF.push(t,"4d876aa0KpKhJ/47Fb++2vg","StartPanelCtrl"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameManager"),i=e("./LanguageManager"),a=cc._decorator,r=a.ccclass,s=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t.startBtn=null,t.startLabel=null,t.skeleton=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.startLabel.string=i.default.instance.getString("start"),this.title.string=i.default.instance.getString("gameName");var e=this;this.skeleton.setCompleteListener(function(){e.startBtn.active=!0,e.startBtn.stopAllActions(),e.startBtn.scale=0,e.startBtn.runAction(cc.sequence(cc.scaleTo(.1,1.3),cc.scaleTo(.1,.8),cc.scaleTo(.1,1)))})},t.prototype.onEnable=function(){this.startBtn.active=!1,this.skeleton.node.active=!0,this.skeleton.setAnimation(0,"start",!1)},t.prototype.onStart=function(){o.default.instance.showGamePanel()},__decorate([s(cc.Label)],t.prototype,"title",void 0),__decorate([s(cc.Node)],t.prototype,"startBtn",void 0),__decorate([s(cc.Label)],t.prototype,"startLabel",void 0),__decorate([s(sp.Skeleton)],t.prototype,"skeleton",void 0),t=__decorate([r],t)}(cc.Component);n.default=c,cc._RF.pop()},{"./GameManager":"GameManager","./LanguageManager":"LanguageManager"}],SynthesisAnimInfo:[function(e,t,n){"use strict";cc._RF.push(t,"f8741JjIllNFK/SHksfFsl6","SynthesisAnimInfo"),Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("./GameManager");(function(e){e[e.Carry=0]="Carry",e[e.Explosion=1]="Explosion",e[e.Reward=2]="Reward"})(o=n.SynthesisAnimType||(n.SynthesisAnimType={}));var a=function(){function e(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=[]),this._nodes=null,this._rewards=null,this._score=0,this._type=o.Carry,this._nodes=e,this._score=n,this._type=t,this._rewards=i}return Object.defineProperty(e.prototype,"rewards",{get:function(){return this._rewards},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),e.prototype.recycle=function(){for(var e=0,t=this._nodes;e<t.length;e++){var n=t[e];i.default.instance.recycleSynthesisAnimNode(n)}this._nodes.length=0},e.prototype.getFirstNode=function(){return this._nodes[0]},e.prototype.playCarryAnim=function(){for(var e=0,t=this._nodes;e<t.length;e++){t[e].beginCarryAnim()}},e}();n.default=a,cc._RF.pop()},{"./GameManager":"GameManager"}],SynthesisAnimNode:[function(e,t,n){"use strict";cc._RF.push(t,"900eapVd4NC6IfhHd/PNObg","SynthesisAnimNode"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameManager"),i=function(){function e(){this._parent=null,this._children=[],this._depth=0,this._item=null,this._num=0}return Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"num",{get:function(){return this._num},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._parent=null,this._children.length=0,this._item=null,this._depth=0},e.prototype.init=function(e){this._item=e,this._num=e.num},e.prototype.addChild=function(e){e._parent=this,e._depth=this._depth+1,this._children.push(e)},e.prototype.beginCarryAnim=function(){this._item.beginCarryAnim(this)},e.prototype.playCarryAnim=function(){this._item.playCarryAnim(this)},e.prototype.getTime=function(){var e=this._children.length>0?this._depth:this._depth-1;return o.default.instance.synthesisAnimTime/Math.pow(2,e)},e}();n.default=i,cc._RF.pop()},{"./GameManager":"GameManager"}]},{},["AdRewardTipPanelCtrl","AdsManager","AudioManager","BenzLog","ButtonEffect","ChangeAnimCtrl","Dictionary","Queue","DataManager","GameManager","GamePanelCtrl","GameToolCtrl","GuideHexItem","GuidePanelCtrl","HexGenerateCtrl","HexGenerateData","HexGenerateItem","HexItem","HexItemData","LanguageManager","MyPageView","MyPageViewIndicator","MyPageViewIndicatorItem","NetHex","OverPanelCtrl","PausePanelCtrl","Benz4399Platform","BenzAdsEntity","BenzCommand","BenzFacebookPlatform","BenzLeaderboardEntity","BenzMobileNativePlatform","BenzPlatform","BenzPlatformManager","BenzPlatformType","BenzSocialManager","BenzWebPlatform","RewardHexItem","RewardHexsItem","RewardHexsPanelCtrl","RulePageCtrl","RulePanelCtrl","StartPanelCtrl","SynthesisAnimInfo","SynthesisAnimNode"]);